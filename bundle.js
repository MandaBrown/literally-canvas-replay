!function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return r(n?n:t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){function i(t,e){var n=new r(t),i=new o(t),h=e.findByName("studentDrawing"),c=new s(h),u=new a(h),l=[n,i,c,u],p=function(){return l.map(function(t){return t.name})},d=function(t){return filtered=l.filter(function(e){return e.name===t}),null!=filtered?filtered[0]:void 0},f=function(t,e){action=d(t),null!=action&&action.action(e)};return{execute:f,allowedActions:p()}}var r=t("./shape.js"),o=t("./clear.js"),s=t("./turnOnDrawing.js"),a=t("./turnOffDrawing.js");e.exports=i},{"./clear.js":2,"./shape.js":3,"./turnOffDrawing.js":4,"./turnOnDrawing.js":5}],2:[function(t,e,n){function i(t){var e="clear",n=function(e){t.clear()};return{name:e,action:n}}t("../vendor/literallycanvas-core.min.js");e.exports=i},{"../vendor/literallycanvas-core.min.js":13}],3:[function(t,e,n){function i(t){var e="shape",n=function(e){t.saveShape(r.JSONToShape(e.shape),!1,e.previousShapeId)};return{name:e,action:n}}var r=t("../vendor/literallycanvas-core.min.js");e.exports=i},{"../vendor/literallycanvas-core.min.js":13}],4:[function(t,e,n){function i(t){var e="turnOffDrawing",n=function(e){t.updateState(!1)};return{name:e,action:n}}e.exports=i},{}],5:[function(t,e,n){function i(t){var e="turnOnDrawing",n=function(e){t.updateState(!0)};return{name:e,action:n}}e.exports=i},{}],6:[function(t,e,n){function i(t,e,n,i){var r=document.createElement("div"),e=e,o="action-dot",s="active",a="inactive",h=document.createElement("div");h.className="display-name",h.innerText=t.displayName;var c=document.createElement("div");c.className="sent-at",c.innerText=t.sentAt;var u=function(){i(e)},l=function(){n.innerHTML=h.outerHTML+c.outerHTML},p=function(t){var e;t?(l(),e=s):e=a,r.className=o+" "+e};return r.addEventListener("click",u),p(!1),{el:r,triggerClick:u,actionIndex:e,setActiveState:p}}e.exports=i},{}],7:[function(t,e,n){function i(t){var e=document.createElement("div"),n=document.createElement("div"),i=[],o=null,s=function(t){var i=t.nextSibling,r=t.parentElement;e.className="frame-control",n.className="meta-info",null==i?r.appendChild(e):r.insertBefore(e,i),e.appendChild(n),c()},a=function(t,o){var s;t.forEach(function(t,a){s=new r(t,a,n,o),e.appendChild(s.el),i.push(s)})},h=function(t){var e;return o=t,i.forEach(function(n){active=n.actionIndex===t,active&&(e=n),n.setActiveState(active)}),e},c=function(){var t=document.createElement("div");t.className="arrow-control";var n=function(){o>=i.length-1||(activeDot=h(o+1),activeDot.triggerClick())},r=function(){0!=o&&(activeDot=h(o-1),activeDot.triggerClick())},s=function(t){37==t.keyCode&&r(),39==t.keyCode&&n()},a=document.createElement("div"),c=document.createElement("div");a.innerText="<",c.innerText=">",a.addEventListener("click",r),c.addEventListener("click",n),document.addEventListener("keydown",s),t.appendChild(a),t.appendChild(c),e.appendChild(t)};return s(t.canvasElement),{loadActions:a,setActiveDot:h}}var r=t("./action_dot.js");e.exports=i},{"./action_dot.js":6}],8:[function(t,e,n){const i=1e3,r=500;var o=t("./index.js"),s="replay-canvas",a=document.getElementById(s),h={defaultStrokeWidth:4,primaryColor:"#000",secondaryColor:"transparent",backgroundColor:"#FFF",imageSize:{width:i,height:r},keyboardShortcuts:!1},c={canvasElement:a,lcOptions:h},u={action:"shape",shape:{className:"LinePath",data:{order:3,tailSize:3,smooth:"true",pointCoordinatePairs:[[202,75],[208,75],[287,83],[295,85],[301,86],[304,88],[305,89],[303,91],[296,94],[286,99],[277,103],[269,108],[256,116],[245,120],[239,123],[235,125],[231,128],[228,129],[228,130],[228,131],[232,132],[238,132],[254,134],[271,135],[294,137],[311,140],[321,143],[328,146],[335,152],[338,161],[339,171],[331,180],[303,194],[290,200],[269,204],[262,204],[247,202],[241,202],[231,201],[229,201]],smoothedPointCoordinatePairs:[[202,75],[202.01171875,75],[202.046875,75],[202.1171875,75],[202.234375,75],[202.41015625,75],[202.65625,75],[202.984375,75],[203.40625,75],[204.052734375,75.015625],[205.0546875,75.0625],[206.54296875,75.15625],[208.6484375,75.3125],[211.501953125,75.546875],[215.234375,75.875],[219.9765625,76.3125],[225.859375,76.875],[232.6015625,77.53515625],[239.921875,78.265625],[247.5390625,79.0390625],[255.171875,79.828125],[262.5390625,80.60546875],[269.359375,81.34375],[275.3515625,82.015625],[280.234375,82.59375],[284.142578125,83.087890625],[287.2109375,83.5078125],[289.57421875,83.86328125],[291.3671875,84.1640625],[292.724609375,84.419921875],[293.78125,84.640625],[294.671875,84.8359375],[295.53125,85.015625],[296.357421875,85.18359375],[297.1484375,85.34375],[297.90234375,85.5],[298.6171875,85.65625],[299.291015625,85.81640625],[299.921875,85.984375],[300.5078125,86.1640625],[301.046875,86.359375],[301.541015625,86.56640625],[301.9921875,86.78125],[302.40234375,87],[302.7734375,87.21875],[303.107421875,87.43359375],[303.40625,87.640625],[303.671875,87.8359375],[303.90625,88.015625],[304.107421875,88.18359375],[304.2734375,88.34375],[304.40234375,88.5],[304.4921875,88.65625],[304.541015625,88.81640625],[304.546875,88.984375],[304.5078125,89.1640625],[304.421875,89.359375],[304.28515625,89.5703125],[304.09375,89.796875],[303.84375,90.0390625],[303.53125,90.296875],[303.15234375,90.5703125],[302.703125,90.859375],[302.1796875,91.1640625],[301.578125,91.484375],[300.90234375,91.822265625],[300.15625,92.1796875],[299.34375,92.55859375],[298.46875,92.9609375],[297.53515625,93.388671875],[296.546875,93.84375],[295.5078125,94.328125],[294.421875,94.84375],[293.296875,95.384765625],[292.140625,95.9453125],[290.9609375,96.51953125],[289.765625,97.1015625],[288.5625,97.685546875],[287.359375,98.265625],[286.1640625,98.8359375],[284.984375,99.390625],[283.8203125,99.93359375],[282.671875,100.46875],[281.5390625,101],[280.421875,101.53125],[279.3203125,102.06640625],[278.234375,102.609375],[277.1640625,103.1640625],[276.109375,103.734375],[275.05859375,104.32421875],[274,104.9375],[272.921875,105.578125],[271.8125,106.25],[270.66015625,106.95703125],[269.453125,107.703125],[268.1796875,108.4921875],[266.828125,109.328125],[265.412109375,110.197265625],[263.9453125,111.0859375],[262.44140625,111.98046875],[260.9140625,112.8671875],[259.376953125,113.732421875],[257.84375,114.5625],[256.328125,115.34375],[254.84375,116.0625],[253.396484375,116.724609375],[251.9921875,117.3359375],[250.63671875,117.90234375],[249.3359375,118.4296875],[248.095703125,118.923828125],[246.921875,119.390625],[245.8203125,119.8359375],[244.796875,120.265625],[243.845703125,120.6796875],[242.9609375,121.078125],[242.13671875,121.4609375],[241.3671875,121.828125],[240.646484375,122.1796875],[239.96875,122.515625],[239.328125,122.8359375],[238.71875,123.140625],[238.13671875,123.43359375],[237.578125,123.71875],[237.0390625,124],[236.515625,124.28125],[236.00390625,124.56640625],[235.5,124.859375],[235,125.1640625],[234.5,125.484375],[234.001953125,125.814453125],[233.5078125,126.1484375],[233.01953125,126.48046875],[232.5390625,126.8046875],[232.068359375,127.115234375],[231.609375,127.40625],[231.1640625,127.671875],[230.734375,127.90625],[230.32421875,128.11328125],[229.9375,128.296875],[229.578125,128.4609375],[229.25,128.609375],[228.95703125,128.74609375],[228.703125,128.875],[228.4921875,129],[228.328125,129.125],[228.205078125,129.25],[228.1171875,129.375],[228.05859375,129.5],[228.0234375,129.625],[228.005859375,129.75],[228,129.875],[228,130],[228,130.125],[228.0078125,130.25],[228.03125,130.375],[228.078125,130.5],[228.15625,130.625],[228.2734375,130.75],[228.4375,130.875],[228.65625,131],[228.9375,131.125],[229.27734375,131.248046875],[229.671875,131.3671875],[230.1171875,131.48046875],[230.609375,131.5859375],[231.14453125,131.681640625],[231.71875,131.765625],[232.328125,131.8359375],[232.96875,131.890625],[233.65625,131.935546875],[234.40625,131.9765625],[235.234375,132.01953125],[236.15625,132.0703125],[237.1875,132.134765625],[238.34375,132.21875],[239.640625,132.328125],[241.09375,132.46875],[242.685546875,132.634765625],[244.3984375,132.8203125],[246.21484375,133.01953125],[248.1171875,133.2265625],[250.087890625,133.435546875],[252.109375,133.640625],[254.1640625,133.8359375],[256.234375,134.015625],[258.330078125,134.18359375],[260.4609375,134.34375],[262.63671875,134.5],[264.8671875,134.65625],[267.162109375,134.81640625],[269.53125,134.984375],[271.984375,135.1640625],[274.53125,135.359375],[277.1484375,135.5703125],[279.8125,135.796875],[282.5,136.0390625],[285.1875,136.296875],[287.8515625,136.5703125],[290.46875,136.859375],[293.015625,137.1640625],[295.46875,137.484375],[297.826171875,137.818359375],[300.0859375,138.1640625],[302.24609375,138.51953125],[304.3046875,138.8828125],[306.259765625,139.251953125],[308.109375,139.625],[309.8515625,140],[311.484375,140.375],[313.015625,140.75],[314.453125,141.125],[315.8046875,141.5],[317.078125,141.875],[318.28125,142.25],[319.421875,142.625],[320.5078125,143],[321.546875,143.375],[322.544921875,143.755859375],[323.5078125,144.1484375],[324.44140625,144.55859375],[325.3515625,144.9921875],[326.244140625,145.455078125],[327.125,145.953125],[328,146.4921875],[328.875,147.078125],[329.7421875,147.7109375],[330.59375,148.390625],[331.421875,149.1171875],[332.21875,149.890625],[332.9765625,150.7109375],[333.6875,151.578125],[334.34375,152.4921875],[334.9375,153.453125],[335.47265625,154.45703125],[335.953125,155.5],[336.3828125,156.578125],[336.765625,157.6875],[337.10546875,158.82421875],[337.40625,159.984375],[337.671875,161.1640625],[337.90625,162.359375],[338.095703125,163.56640625],[338.2265625,164.78125],[338.28515625,166],[338.2578125,167.21875],[338.130859375,168.43359375],[337.890625,169.640625],[337.5234375,170.8359375],[337.015625,172.015625],[336.345703125,173.19140625],[335.4921875,174.375],[334.43359375,175.578125],[333.1484375,176.8125],[331.615234375,178.08984375],[329.8125,179.421875],[327.71875,180.8203125],[325.3125,182.296875],[322.662109375,183.826171875],[319.8359375,185.3828125],[316.90234375,186.94140625],[313.9296875,188.4765625],[310.986328125,189.962890625],[308.140625,191.375],[305.4609375,192.6875],[303.015625,193.875],[300.759765625,194.94921875],[298.6484375,195.921875],[296.63671875,196.8046875],[294.6796875,197.609375],[292.732421875,198.34765625],[290.75,199.03125],[288.6875,199.671875],[286.5,200.28125],[284.23046875,200.85546875],[281.921875,201.390625],[279.6171875,201.8828125],[277.359375,202.328125],[275.19140625,202.72265625],[273.15625,203.0625],[271.296875,203.34375],[269.65625,203.5625],[268.19140625,203.72265625],[266.859375,203.828125],[265.6171875,203.8828125],[264.421875,203.890625],[263.23046875,203.85546875],[262,203.78125],[260.6875,203.671875],[259.25,203.53125],[257.720703125,203.3671875],[256.1328125,203.1875],[254.51953125,203],[252.9140625,202.8125],[251.349609375,202.6328125],[249.859375,202.46875],[248.4765625,202.328125],[247.234375,202.21875],[246.107421875,202.134765625],[245.0703125,202.0703125],[244.09765625,202.01953125],[243.1640625,201.9765625],[242.244140625,201.935546875],[241.3125,201.890625],[240.34375,201.8359375],[239.3125,201.765625],[238.2421875,201.68359375],[237.15625,201.59375],[236.078125,201.5],[235.03125,201.40625],[234.0390625,201.31640625],[233.125,201.234375],[232.3125,201.1640625],[231.625,201.109375],[231.05078125,201.068359375],[230.578125,201.0390625],[230.1953125,201.01953125],[229.890625,201.0078125],[229.65234375,201.001953125],[229.46875,201],[229.328125,201],[229.21875,201],[229.13671875,201],[229.078125,201],[229.0390625,201],[229.015625,201],[229.00390625,201],[229,201]],pointSize:4,pointColor:"grey"},id:"1048c9fd-fd30-2231-5cb6-a39c0e89e1e1"},previousShapeId:"752dc9b7-d6de-3ee2-0c39-e7cb1e966839"},l={action:"clear"},p=[{displayName:"Yule Lord",sentAt:"Christmas Eve",message:u},{displayName:"Yule Lord",sentAt:"Christmas Morning",message:l},{displayName:"Yule Lord",sentAt:"12:52:55",message:{action:"shape",shape:{className:"LinePath",data:{order:3,tailSize:3,smooth:!0,pointCoordinatePairs:[[62,53],[61,58],[61,64],[60,67],[60,71],[60,74],[60,77],[60,79],[60,81],[61,83],[61,88],[61,92],[60,95],[59,99],[58,103],[58,106],[58,109],[57,110],[57,112],[57,114],[57,115],[58,116],[58,117],[58,119],[58,120],[58,121],[58,122],[58,123],[58,126],[58,127],[59,128],[60,128],[60,129],[62,129],[63,129],[65,129],[63,129],[61,130],[51,137]],smoothedPointCoordinatePairs:[[62,53],[61.998046875,53.009765625],[61.9921875,53.0390625],[61.98046875,53.09765625],[61.9609375,53.1953125],[61.931640625,53.341796875],[61.890625,53.546875],[61.8359375,53.8203125],[61.765625,54.171875],[61.68359375,54.59375],[61.59375,55.078125],[61.5,55.6171875],[61.40625,56.203125],[61.31640625,56.828125],[61.234375,57.484375],[61.1640625,58.1640625],[61.109375,58.859375],[61.06640625,59.5625],[61.03125,60.265625],[61,60.9609375],[60.96875,61.640625],[60.93359375,62.296875],[60.890625,62.921875],[60.8359375,63.5078125],[60.765625,64.046875],[60.68359375,64.546875],[60.59375,65.015625],[60.5,65.4609375],[60.40625,65.890625],[60.31640625,66.3125],[60.234375,66.734375],[60.1640625,67.1640625],[60.109375,67.609375],[60.068359375,68.06640625],[60.0390625,68.53125],[60.01953125,69],[60.0078125,69.46875],[60.001953125,69.93359375],[60,70.390625],[60,70.8359375],[60,71.265625],[60,71.681640625],[60,72.0859375],[60,72.48046875],[60,72.8671875],[60,73.248046875],[60,73.625],[60,74],[60,74.375],[60,74.748046875],[60,75.1171875],[60,75.48046875],[60,75.8359375],[60,76.181640625],[60,76.515625],[60,76.8359375],[60,77.140625],[60,77.431640625],[60,77.7109375],[60,77.98046875],[60,78.2421875],[60,78.498046875],[60,78.75],[60,79],[60,79.25],[60.001953125,79.5],[60.0078125,79.75],[60.01953125,80],[60.0390625,80.25],[60.068359375,80.5],[60.109375,80.75],[60.1640625,81],[60.234375,81.25],[60.31640625,81.505859375],[60.40625,81.7734375],[60.5,82.05859375],[60.59375,82.3671875],[60.68359375,82.705078125],[60.765625,83.078125],[60.8359375,83.4921875],[60.890625,83.953125],[60.931640625,84.453125],[60.9609375,84.984375],[60.98046875,85.5390625],[60.9921875,86.109375],[60.998046875,86.6875],[61,87.265625],[61,87.8359375],[61,88.390625],[60.998046875,88.9296875],[60.9921875,89.453125],[60.98046875,89.9609375],[60.9609375,90.453125],[60.931640625,90.9296875],[60.890625,91.390625],[60.8359375,91.8359375],[60.765625,92.265625],[60.681640625,92.68359375],[60.5859375,93.09375],[60.48046875,93.5],[60.3671875,93.90625],[60.248046875,94.31640625],[60.125,94.734375],[60,95.1640625],[59.875,95.609375],[59.75,96.068359375],[59.625,96.5390625],[59.5,97.01953125],[59.375,97.5078125],[59.25,98.001953125],[59.125,98.5],[59,99],[58.875,99.5],[58.751953125,99.998046875],[58.6328125,100.4921875],[58.51953125,100.98046875],[58.4140625,101.4609375],[58.318359375,101.931640625],[58.234375,102.390625],[58.1640625,102.8359375],[58.109375,103.265625],[58.068359375,103.681640625],[58.0390625,104.0859375],[58.01953125,104.48046875],[58.0078125,104.8671875],[58.001953125,105.248046875],[58,105.625],[58,106],[58,106.375],[57.998046875,106.74609375],[57.9921875,107.109375],[57.98046875,107.4609375],[57.9609375,107.796875],[57.931640625,108.11328125],[57.890625,108.40625],[57.8359375,108.671875],[57.765625,108.90625],[57.68359375,109.115234375],[57.59375,109.3046875],[57.5,109.48046875],[57.40625,109.6484375],[57.31640625,109.814453125],[57.234375,109.984375],[57.1640625,110.1640625],[57.109375,110.359375],[57.068359375,110.568359375],[57.0390625,110.7890625],[57.01953125,111.01953125],[57.0078125,111.2578125],[57.001953125,111.501953125],[57,111.75],[57,112],[57,112.25],[57,112.498046875],[57,112.7421875],[57,112.98046875],[57,113.2109375],[57,113.431640625],[57,113.640625],[57,113.8359375],[57,114.015625],[57.001953125,114.181640625],[57.0078125,114.3359375],[57.01953125,114.48046875],[57.0390625,114.6171875],[57.068359375,114.748046875],[57.109375,114.875],[57.1640625,115],[57.234375,115.125],[57.31640625,115.25],[57.40625,115.375],[57.5,115.5],[57.59375,115.625],[57.68359375,115.75],[57.765625,115.875],[57.8359375,116],[57.890625,116.125],[57.931640625,116.251953125],[57.9609375,116.3828125],[57.98046875,116.51953125],[57.9921875,116.6640625],[57.998046875,116.818359375],[58,116.984375],[58,117.1640625],[58,117.359375],[58,117.56640625],[58,117.78125],[58,118],[58,118.21875],[58,118.43359375],[58,118.640625],[58,118.8359375],[58,119.015625],[58,119.181640625],[58,119.3359375],[58,119.48046875],[58,119.6171875],[58,119.748046875],[58,119.875],[58,120],[58,120.125],[58,120.25],[58,120.375],[58,120.5],[58,120.625],[58,120.75],[58,120.875],[58,121],[58,121.125],[58,121.25],[58,121.375],[58,121.5],[58,121.625],[58,121.75],[58,121.875],[58,122],[58,122.125],[58,122.25390625],[58,122.390625],[58,122.5390625],[58,122.703125],[58,122.88671875],[58,123.09375],[58,123.328125],[58,123.59375],[58,123.8828125],[58,124.1875],[58,124.5],[58,124.8125],[58,125.1171875],[58,125.40625],[58,125.671875],[58,125.90625],[58.001953125,126.11328125],[58.0078125,126.296875],[58.01953125,126.4609375],[58.0390625,126.609375],[58.068359375,126.74609375],[58.109375,126.875],[58.1640625,127],[58.234375,127.125],[58.318359375,127.248046875],[58.4140625,127.3671875],[58.51953125,127.48046875],[58.6328125,127.5859375],[58.751953125,127.681640625],[58.875,127.765625],[59,127.8359375],[59.125,127.890625],[59.248046875,127.93359375],[59.3671875,127.96875],[59.48046875,128],[59.5859375,128.03125],[59.681640625,128.06640625],[59.765625,128.109375],[59.8359375,128.1640625],[59.890625,128.234375],[59.935546875,128.31640625],[59.9765625,128.40625],[60.01953125,128.5],[60.0703125,128.59375],[60.134765625,128.68359375],[60.21875,128.765625],[60.328125,128.8359375],[60.46875,128.890625],[60.634765625,128.931640625],[60.8203125,128.9609375],[61.01953125,128.98046875],[61.2265625,128.9921875],[61.435546875,128.998046875],[61.640625,129],[61.8359375,129],[62.015625,129],[62.18359375,129],[62.34375,129],[62.5,129],[62.65625,129],[62.81640625,129],[62.984375,129],[63.1640625,129],[63.359375,129],[63.560546875,129],[63.7578125,129],[63.94140625,129],[64.1015625,129],[64.228515625,129],[64.3125,129],[64.34375,129],[64.3125,129],[64.2265625,129.001953125],[64.09375,129.0078125],[63.921875,129.01953125],[63.71875,129.0390625],[63.4921875,129.068359375],[63.25,129.109375],[63,129.1640625],[62.75,129.234375],[62.484375,129.330078125],[62.1875,129.4609375],[61.84375,129.63671875],[61.4375,129.8671875],[60.953125,130.162109375],[60.375,130.53125],[59.6875,130.984375],[58.875,131.53125],[57.97265625,132.146484375],[57.015625,132.8046875],[56.0390625,133.48046875],[55.078125,134.1484375],[54.16796875,134.783203125],[53.34375,135.359375],[52.640625,135.8515625],[52.09375,136.234375],[51.68359375,136.521484375],[51.390625,136.7265625],[51.1953125,136.86328125],[51.078125,136.9453125],[51.01953125,136.986328125],[51,137]],pointSize:4,pointColor:"#000"},id:"60b388e9-a4b8-3cba-213d-06eb441fc139"},previousShapeId:null}},{displayName:"Yule Lord",sentAt:"12:52:56",message:{action:"shape",shape:{className:"LinePath",data:{order:3,tailSize:3,smooth:!0,pointCoordinatePairs:[[116,68],[115,81],[115,90],[115,104],[115,113],[115,120],[115,125],[115,128],[115,130],[115,131],[115,132]],smoothedPointCoordinatePairs:[[116,68],[115.998046875,68.025390625],[115.9921875,68.1015625],[115.98046875,68.25390625],[115.9609375,68.5078125],[115.931640625,68.888671875],[115.890625,69.421875],[115.8359375,70.1328125],[115.765625,71.046875],[115.68359375,72.130859375],[115.59375,73.3515625],[115.5,74.67578125],[115.40625,76.0703125],[115.31640625,77.501953125],[115.234375,78.9375],[115.1640625,80.34375],[115.109375,81.6875],[115.068359375,82.986328125],[115.0390625,84.2578125],[115.01953125,85.51953125],[115.0078125,86.7890625],[115.001953125,88.083984375],[115,89.421875],[115,90.8203125],[115,92.296875],[115,93.83203125],[115,95.40625],[115,97],[115,98.59375],[115,100.16796875],[115,101.703125],[115,103.1796875],[115,104.578125],[115,105.904296875],[115,107.1640625],[115,108.36328125],[115,109.5078125],[115,110.603515625],[115,111.65625],[115,112.671875],[115,113.65625],[115,114.609375],[115,115.53125],[115,116.421875],[115,117.28125],[115,118.109375],[115,118.90625],[115,119.671875],[115,120.40625],[115,121.109375],[115,121.78125],[115,122.421875],[115,123.03125],[115,123.609375],[115,124.15625],[115,124.671875],[115,125.15625],[115,125.611328125],[115,126.0390625],[115,126.44140625],[115,126.8203125],[115,127.177734375],[115,127.515625],[115,127.8359375],[115,128.140625],[115,128.4296875],[115,128.703125],[115,128.9609375],[115,129.203125],[115,129.4296875],[115,129.640625],[115,129.8359375],[115,130.015625],[115,130.181640625],[115,130.3359375],[115,130.48046875],[115,130.6171875],[115,130.748046875],[115,130.875],[115,131],[115,131.125],[115,131.248046875],[115,131.3671875],[115,131.48046875],[115,131.5859375],[115,131.681640625],[115,131.765625],[115,131.8359375],[115,131.890625],[115,131.931640625],[115,131.9609375],[115,131.98046875],[115,131.9921875],[115,131.998046875],[115,132]],pointSize:4,pointColor:"#000"},id:"3405c0a6-39a3-8b0a-8a27-2d0208de8fc6"},previousShapeId:"60b388e9-a4b8-3cba-213d-06eb441fc139"}},{displayName:"Yule Lord",sentAt:"12:52:58",message:{action:"shape",shape:{className:"LinePath",data:{order:3,tailSize:3,smooth:!0,pointCoordinatePairs:[[85,100],[101,100],[111,100],[123,100],[130,100],[136,100],[139,100],[145,100],[147,100],[148,98],[148,98]],smoothedPointCoordinatePairs:[[85,100],[85.03125,100],[85.125,100],[85.3125,100],[85.625,100],[86.09375,100],[86.75,100],[87.625,100],[88.75,100],[90.08203125,100],[91.578125,100],[93.1953125,100],[94.890625,100],[96.62109375,100],[98.34375,100],[100.015625,100],[101.59375,100],[103.09375,100],[104.53125,100],[105.921875,100],[107.28125,100],[108.625,100],[109.96875,100],[111.328125,100],[112.71875,100],[114.126953125,100],[115.5390625,100],[116.94140625,100],[118.3203125,100],[119.662109375,100],[120.953125,100],[122.1796875,100],[123.328125,100],[124.40625,100],[125.421875,100],[126.3828125,100],[127.296875,100],[128.171875,100],[129.015625,100],[129.8359375,100],[130.640625,100],[131.42578125,100],[132.1875,100],[132.921875,100],[133.625,100],[134.29296875,100],[134.921875,100],[135.5078125,100],[136.046875,100],[136.55078125,100],[137.03125,100],[137.5,100],[137.96875,100],[138.44921875,100],[138.953125,100],[139.4921875,100],[140.078125,100],[140.697265625,100],[141.3359375,100],[141.98046875,100],[142.6171875,100],[143.232421875,100],[143.8125,100],[144.34375,100],[144.8125,100],[145.224609375,99.99609375],[145.5859375,99.984375],[145.90234375,99.9609375],[146.1796875,99.921875],[146.423828125,99.86328125],[146.640625,99.78125],[146.8359375,99.671875],[147.015625,99.53125],[147.1796875,99.3671875],[147.328125,99.1875],[147.4609375,99],[147.578125,98.8125],[147.6796875,98.6328125],[147.765625,98.46875],[147.8359375,98.328125],[147.890625,98.21875],[147.931640625,98.13671875],[147.9609375,98.078125],[147.98046875,98.0390625],[147.9921875,98.015625],[147.998046875,98.00390625],[148,98],[148,98],[148,98],[148,98],[148,98],[148,98],[148,98],[148,98],[148,98]],pointSize:4,pointColor:"#000"},id:"13a5c943-d231-ee6c-343b-d4f2ba5ae941"},previousShapeId:"3405c0a6-39a3-8b0a-8a27-2d0208de8fc6"}},{displayName:"Yule Lord",sentAt:"12:53:03",message:{action:"shape",shape:{className:"LinePath",data:{order:3,tailSize:3,smooth:!0,pointCoordinatePairs:[[164,52],[170,51],[173,50],[175,50],[178,50],[181,49],[183,49],[187,49],[189,49],[192,49],[193,51],[195,52],[197,54],[198,56],[199,60],[201,64],[201,68],[201,71],[201,75],[201,78],[201,82],[201,86],[200,89],[198,92],[197,98],[195,102],[193,105],[190,109],[188,112],[183,118],[181,121],[178,124],[176,126],[175,129],[172,131],[172,132],[171,133],[171,135],[173,135],[177,135],[180,135],[184,135],[190,135],[194,135],[200,135],[204,135],[208,136],[212,137],[215,137],[217,138],[218,138],[219,138]],smoothedPointCoordinatePairs:[[164,52],[164.01171875,51.998046875],[164.046875,51.9921875],[164.1171875,51.98046875],[164.234375,51.9609375],[164.41015625,51.931640625],[164.65625,51.890625],[164.984375,51.8359375],[165.40625,51.765625],[165.904296875,51.681640625],[166.4609375,51.5859375],[167.05859375,51.48046875],[167.6796875,51.3671875],[168.306640625,51.248046875],[168.921875,51.125],[169.5078125,51],[170.046875,50.875],[170.54296875,50.751953125],[171,50.6328125],[171.421875,50.51953125],[171.8125,50.4140625],[172.17578125,50.318359375],[172.515625,50.234375],[172.8359375,50.1640625],[173.140625,50.109375],[173.43359375,50.068359375],[173.71875,50.0390625],[174,50.01953125],[174.28125,50.0078125],[174.56640625,50.001953125],[174.859375,50],[175.1640625,50],[175.484375,50],[175.818359375,49.998046875],[176.1640625,49.9921875],[176.51953125,49.98046875],[176.8828125,49.9609375],[177.251953125,49.931640625],[177.625,49.890625],[178,49.8359375],[178.375,49.765625],[178.748046875,49.68359375],[179.1171875,49.59375],[179.48046875,49.5],[179.8359375,49.40625],[180.181640625,49.31640625],[180.515625,49.234375],[180.8359375,49.1640625],[181.140625,49.109375],[181.435546875,49.068359375],[181.7265625,49.0390625],[182.01953125,49.01953125],[182.3203125,49.0078125],[182.634765625,49.001953125],[182.96875,49],[183.328125,49],[183.71875,49],[184.1328125,49],[184.5625,49],[185,49],[185.4375,49],[185.8671875,49],[186.28125,49],[186.671875,49],[187.03125,49],[187.365234375,49],[187.6796875,49],[187.98046875,49],[188.2734375,49],[188.564453125,49],[188.859375,49],[189.1640625,49],[189.484375,49],[189.814453125,49.00390625],[190.1484375,49.015625],[190.48046875,49.0390625],[190.8046875,49.078125],[191.115234375,49.13671875],[191.40625,49.21875],[191.671875,49.328125],[191.90625,49.46875],[192.115234375,49.634765625],[192.3046875,49.8203125],[192.48046875,50.01953125],[192.6484375,50.2265625],[192.814453125,50.435546875],[192.984375,50.640625],[193.1640625,50.8359375],[193.359375,51.015625],[193.568359375,51.18359375],[193.7890625,51.34375],[194.01953125,51.5],[194.2578125,51.65625],[194.501953125,51.81640625],[194.75,51.984375],[195,52.1640625],[195.25,52.359375],[195.498046875,52.568359375],[195.7421875,52.7890625],[195.98046875,53.01953125],[196.2109375,53.2578125],[196.431640625,53.501953125],[196.640625,53.75],[196.8359375,54],[197.015625,54.25],[197.181640625,54.50390625],[197.3359375,54.765625],[197.48046875,55.0390625],[197.6171875,55.328125],[197.748046875,55.63671875],[197.875,55.96875],[198,56.328125],[198.125,56.71875],[198.251953125,57.13671875],[198.3828125,57.578125],[198.51953125,58.0390625],[198.6640625,58.515625],[198.818359375,59.00390625],[198.984375,59.5],[199.1640625,60],[199.359375,60.5],[199.564453125,61],[199.7734375,61.5],[199.98046875,62],[200.1796875,62.5],[200.365234375,63],[200.53125,63.5],[200.671875,64],[200.78125,64.5],[200.86328125,64.998046875],[200.921875,65.4921875],[200.9609375,65.98046875],[200.984375,66.4609375],[200.99609375,66.931640625],[201,67.390625],[201,67.8359375],[201,68.265625],[201,68.68359375],[201,69.09375],[201,69.5],[201,69.90625],[201,70.31640625],[201,70.734375],[201,71.1640625],[201,71.609375],[201,72.06640625],[201,72.53125],[201,73],[201,73.46875],[201,73.93359375],[201,74.390625],[201,74.8359375],[201,75.265625],[201,75.68359375],[201,76.09375],[201,76.5],[201,76.90625],[201,77.31640625],[201,77.734375],[201,78.1640625],[201,78.609375],[201,79.068359375],[201,79.5390625],[201,80.01953125],[201,80.5078125],[201,81.001953125],[201,81.5],[201,82],[201,82.5],[200.998046875,82.998046875],[200.9921875,83.4921875],[200.98046875,83.98046875],[200.9609375,84.4609375],[200.931640625,84.931640625],[200.890625,85.390625],[200.8359375,85.8359375],[200.765625,86.265625],[200.6796875,86.681640625],[200.578125,87.0859375],[200.4609375,87.48046875],[200.328125,87.8671875],[200.1796875,88.248046875],[200.015625,88.625],[199.8359375,89],[199.640625,89.375],[199.43359375,89.755859375],[199.21875,90.1484375],[199,90.55859375],[198.78125,90.9921875],[198.56640625,91.455078125],[198.359375,91.953125],[198.1640625,92.4921875],[197.984375,93.078125],[197.81640625,93.701171875],[197.65625,94.3515625],[197.5,95.01953125],[197.34375,95.6953125],[197.18359375,96.369140625],[197.015625,97.03125],[196.8359375,97.671875],[196.640625,98.28125],[196.431640625,98.861328125],[196.2109375,99.4140625],[195.98046875,99.94140625],[195.7421875,100.4453125],[195.498046875,100.927734375],[195.25,101.390625],[195,101.8359375],[194.75,102.265625],[194.498046875,102.68359375],[194.2421875,103.09375],[193.98046875,103.5],[193.7109375,103.90625],[193.431640625,104.31640625],[193.140625,104.734375],[192.8359375,105.1640625],[192.515625,105.609375],[192.18359375,106.06640625],[191.84375,106.53125],[191.5,107],[191.15625,107.46875],[190.81640625,107.93359375],[190.484375,108.390625],[190.1640625,108.8359375],[189.859375,109.265625],[189.5625,109.6875],[189.265625,110.109375],[188.9609375,110.5390625],[188.640625,110.984375],[188.296875,111.453125],[187.921875,111.953125],[187.5078125,112.4921875],[187.046875,113.078125],[186.55078125,113.69921875],[186.03125,114.34375],[185.5,115],[184.96875,115.65625],[184.44921875,116.30078125],[183.953125,116.921875],[183.4921875,117.5078125],[183.078125,118.046875],[182.703125,118.544921875],[182.359375,119.0078125],[182.0390625,119.44140625],[181.734375,119.8515625],[181.4375,120.244140625],[181.140625,120.625],[180.8359375,121],[180.515625,121.375],[180.18359375,121.748046875],[179.84375,122.1171875],[179.5,122.48046875],[179.15625,122.8359375],[178.81640625,123.181640625],[178.484375,123.515625],[178.1640625,123.8359375],[177.859375,124.140625],[177.5703125,124.43359375],[177.296875,124.71875],[177.0390625,125],[176.796875,125.28125],[176.5703125,125.56640625],[176.359375,125.859375],[176.1640625,126.1640625],[175.984375,126.484375],[175.814453125,126.81640625],[175.6484375,127.15625],[175.48046875,127.5],[175.3046875,127.84375],[175.115234375,128.18359375],[174.90625,128.515625],[174.671875,128.8359375],[174.40625,129.140625],[174.119140625,129.4296875],[173.8203125,129.703125],[173.51953125,129.9609375],[173.2265625,130.203125],[172.951171875,130.4296875],[172.703125,130.640625],[172.4921875,130.8359375],[172.328125,131.015625],[172.203125,131.181640625],[172.109375,131.3359375],[172.0390625,131.48046875],[171.984375,131.6171875],[171.9375,131.748046875],[171.890625,131.875],[171.8359375,132],[171.765625,132.125],[171.68359375,132.251953125],[171.59375,132.3828125],[171.5,132.51953125],[171.40625,132.6640625],[171.31640625,132.818359375],[171.234375,132.984375],[171.1640625,133.1640625],[171.109375,133.359375],[171.072265625,133.564453125],[171.0546875,133.7734375],[171.05859375,133.98046875],[171.0859375,134.1796875],[171.138671875,134.365234375],[171.21875,134.53125],[171.328125,134.671875],[171.46875,134.78125],[171.640625,134.86328125],[171.84375,134.921875],[172.078125,134.9609375],[172.34375,134.984375],[172.640625,134.99609375],[172.96875,135],[173.328125,135],[173.71875,135],[174.134765625,135],[174.5703125,135],[175.01953125,135],[175.4765625,135],[175.935546875,135],[176.390625,135],[176.8359375,135],[177.265625,135],[177.68359375,135],[178.09375,135],[178.5,135],[178.90625,135],[179.31640625,135],[179.734375,135],[180.1640625,135],[180.609375,135],[181.072265625,135],[181.5546875,135],[182.05859375,135],[182.5859375,135],[183.138671875,135],[183.71875,135],[184.328125,135],[184.96875,135],[185.6328125,135],[186.3125,135],[187,135],[187.6875,135],[188.3671875,135],[189.03125,135],[189.671875,135],[190.28125,135],[190.8671875,135],[191.4375,135],[192,135],[192.5625,135],[193.1328125,135],[193.71875,135],[194.328125,135],[194.96875,135],[195.6328125,135],[196.3125,135],[197,135],[197.6875,135],[198.3671875,135],[199.03125,135],[199.671875,135],[200.28125,135],[200.86328125,135.001953125],[201.421875,135.0078125],[201.9609375,135.01953125],[202.484375,135.0390625],[202.99609375,135.068359375],[203.5,135.109375],[204,135.1640625],[204.5,135.234375],[205,135.318359375],[205.5,135.4140625],[206,135.51953125],[206.5,135.6328125],[207,135.751953125],[207.5,135.875],[208,136],[208.5,136.125],[208.998046875,136.248046875],[209.4921875,136.3671875],[209.98046875,136.48046875],[210.4609375,136.5859375],[210.931640625,136.681640625],[211.390625,136.765625],[211.8359375,136.8359375],[212.265625,136.890625],[212.6796875,136.93359375],[213.078125,136.96875],[213.4609375,137],[213.828125,137.03125],[214.1796875,137.06640625],[214.515625,137.109375],[214.8359375,137.1640625],[215.140625,137.234375],[215.4296875,137.31640625],[215.703125,137.40625],[215.9609375,137.5],[216.203125,137.59375],[216.4296875,137.68359375],[216.640625,137.765625],[216.8359375,137.8359375],[217.015625,137.890625],[217.181640625,137.931640625],[217.3359375,137.9609375],[217.48046875,137.98046875],[217.6171875,137.9921875],[217.748046875,137.998046875],[217.875,138],[218,138],[218.125,138],[218.248046875,138],[218.3671875,138],[218.48046875,138],[218.5859375,138],[218.681640625,138],[218.765625,138],[218.8359375,138],[218.890625,138],[218.931640625,138],[218.9609375,138],[218.98046875,138],[218.9921875,138],[218.998046875,138],[219,138]],
pointSize:10,pointColor:"#179aaa"},id:"ad7752b7-c45b-57db-d81f-6f7d512bc126"},previousShapeId:"13a5c943-d231-ee6c-343b-d4f2ba5ae941"}},{displayName:"Yule Lord",sentAt:"12:53:06",message:{action:"shape",shape:{className:"LinePath",data:{order:3,tailSize:3,smooth:!0,pointCoordinatePairs:[[258,63],[273,63],[282,65],[287,65],[291,66],[295,66],[296,67],[297,67],[297,67],[297,68],[297,69],[298,70],[298,71]],smoothedPointCoordinatePairs:[[258,63],[258.029296875,63],[258.1171875,63],[258.29296875,63],[258.5859375,63],[259.025390625,63],[259.640625,63],[260.4609375,63],[261.515625,63],[262.763671875,63.00390625],[264.1640625,63.015625],[265.67578125,63.0390625],[267.2578125,63.078125],[268.869140625,63.13671875],[270.46875,63.21875],[272.015625,63.328125],[273.46875,63.46875],[274.83203125,63.6328125],[276.109375,63.8125],[277.3046875,64],[278.421875,64.1875],[279.46484375,64.3671875],[280.4375,64.53125],[281.34375,64.671875],[282.1875,64.78125],[282.974609375,64.865234375],[283.7109375,64.9296875],[284.40234375,64.98046875],[285.0546875,65.0234375],[285.673828125,65.064453125],[286.265625,65.109375],[286.8359375,65.1640625],[287.390625,65.234375],[287.931640625,65.31640625],[288.4609375,65.40625],[288.98046875,65.5],[289.4921875,65.59375],[289.998046875,65.68359375],[290.5,65.765625],[291,65.8359375],[291.5,65.890625],[291.994140625,65.93359375],[292.4765625,65.96875],[292.94140625,66],[293.3828125,66.03125],[293.794921875,66.06640625],[294.171875,66.109375],[294.5078125,66.1640625],[294.796875,66.234375],[295.044921875,66.31640625],[295.2578125,66.40625],[295.44140625,66.5],[295.6015625,66.59375],[295.744140625,66.68359375],[295.875,66.765625],[296,66.8359375],[296.125,66.890625],[296.248046875,66.931640625],[296.3671875,66.9609375],[296.48046875,66.98046875],[296.5859375,66.9921875],[296.681640625,66.998046875],[296.765625,67],[296.8359375,67],[296.890625,67],[296.931640625,67.001953125],[296.9609375,67.0078125],[296.98046875,67.01953125],[296.9921875,67.0390625],[296.998046875,67.068359375],[297,67.109375],[297,67.1640625],[297,67.234375],[297,67.318359375],[297,67.4140625],[297,67.51953125],[297,67.6328125],[297,67.751953125],[297,67.875],[297,68],[297,68.125],[297.001953125,68.25],[297.0078125,68.375],[297.01953125,68.5],[297.0390625,68.625],[297.068359375,68.75],[297.109375,68.875],[297.1640625,69],[297.234375,69.125],[297.31640625,69.25],[297.40625,69.375],[297.5,69.5],[297.59375,69.625],[297.68359375,69.75],[297.765625,69.875],[297.8359375,70],[297.890625,70.125],[297.931640625,70.248046875],[297.9609375,70.3671875],[297.98046875,70.48046875],[297.9921875,70.5859375],[297.998046875,70.681640625],[298,70.765625],[298,70.8359375],[298,70.890625],[298,70.931640625],[298,70.9609375],[298,70.98046875],[298,70.9921875],[298,70.998046875],[298,71]],pointSize:4,pointColor:"#5ec059"},id:"6b52a964-3e7e-7cbe-9ed5-9fd7a4142491"},previousShapeId:"ad7752b7-c45b-57db-d81f-6f7d512bc126"}},{displayName:"Yule Lord",sentAt:"12:53:07",message:{action:"shape",shape:{className:"LinePath",data:{order:3,tailSize:3,smooth:!0,pointCoordinatePairs:[[266,83],[275,84],[281,85],[287,86],[292,87],[295,90],[299,91],[300,91],[300,91],[300,92]],smoothedPointCoordinatePairs:[[266,83],[266.017578125,83.001953125],[266.0703125,83.0078125],[266.17578125,83.01953125],[266.3515625,83.0390625],[266.615234375,83.068359375],[266.984375,83.109375],[267.4765625,83.1640625],[268.109375,83.234375],[268.859375,83.318359375],[269.703125,83.4140625],[270.6171875,83.51953125],[271.578125,83.6328125],[272.5625,83.751953125],[273.546875,83.875],[274.5078125,84],[275.421875,84.125],[276.294921875,84.25],[277.1328125,84.375],[277.94140625,84.5],[278.7265625,84.625],[279.494140625,84.75],[280.25,84.875],[281,85],[281.75,85.125],[282.498046875,85.25],[283.2421875,85.375],[283.98046875,85.5],[284.7109375,85.625],[285.431640625,85.75],[286.140625,85.875],[286.8359375,86],[287.515625,86.125],[288.177734375,86.25390625],[288.8203125,86.390625],[289.44140625,86.5390625],[290.0390625,86.703125],[290.611328125,86.88671875],[291.15625,87.09375],[291.671875,87.328125],[292.15625,87.59375],[292.615234375,87.8828125],[293.0546875,88.1875],[293.48046875,88.5],[293.8984375,88.8125],[294.314453125,89.1171875],[294.734375,89.40625],[295.1640625,89.671875],[295.609375,89.90625],[296.0625,90.111328125],[296.515625,90.2890625],[296.9609375,90.44140625],[297.390625,90.5703125],[297.796875,90.677734375],[298.171875,90.765625],[298.5078125,90.8359375],[298.796875,90.890625],[299.04296875,90.931640625],[299.25,90.9609375],[299.421875,90.98046875],[299.5625,90.9921875],[299.67578125,90.998046875],[299.765625,91],[299.8359375,91],[299.890625,91],[299.931640625,91.001953125],[299.9609375,91.0078125],[299.98046875,91.01953125],[299.9921875,91.0390625],[299.998046875,91.068359375],[300,91.109375],[300,91.1640625],[300,91.234375],[300,91.31640625],[300,91.40625],[300,91.5],[300,91.59375],[300,91.68359375],[300,91.765625],[300,91.8359375],[300,91.890625],[300,91.931640625],[300,91.9609375],[300,91.98046875],[300,91.9921875],[300,91.998046875],[300,92]],pointSize:4,pointColor:"#5ec059"},id:"70dce112-c0c8-c3db-3f23-e8ecaec67d28"},previousShapeId:"6b52a964-3e7e-7cbe-9ed5-9fd7a4142491"}},{displayName:"Yule Lord",sentAt:"12:53:14",message:{action:"shape",shape:{className:"LinePath",data:{order:3,tailSize:3,smooth:!0,pointCoordinatePairs:[[340,53],[341,52],[346,49],[351,47],[359,44],[363,43],[367,42],[371,42],[375,41],[380,41],[383,42],[386,43],[389,44],[390,46],[391,49],[391,52],[391,58],[390,63],[388,70],[385,76],[382,81],[380,86],[378,90],[375,95],[373,98],[371,100],[370,102],[369,103],[369,105],[368,105],[368,106],[368,107],[367,108],[367,109],[366,112],[365,114],[364,117],[363,121],[363,124],[363,128],[363,130],[363,131],[363,132]],smoothedPointCoordinatePairs:[[340,53],[340.001953125,52.998046875],[340.0078125,52.9921875],[340.01953125,52.98046875],[340.0390625,52.9609375],[340.068359375,52.931640625],[340.109375,52.890625],[340.1640625,52.8359375],[340.234375,52.765625],[340.326171875,52.677734375],[340.4453125,52.5703125],[340.59765625,52.44140625],[340.7890625,52.2890625],[341.025390625,52.111328125],[341.3125,51.90625],[341.65625,51.671875],[342.0625,51.40625],[342.5234375,51.115234375],[343.03125,50.8046875],[343.578125,50.48046875],[344.15625,50.1484375],[344.7578125,49.814453125],[345.375,49.484375],[346,49.1640625],[346.625,48.859375],[347.255859375,48.56640625],[347.8984375,48.28125],[348.55859375,48],[349.2421875,47.71875],[349.955078125,47.43359375],[350.703125,47.140625],[351.4921875,46.8359375],[352.328125,46.515625],[353.197265625,46.185546875],[354.0859375,45.8515625],[354.98046875,45.51953125],[355.8671875,45.1953125],[356.732421875,44.884765625],[357.5625,44.59375],[358.34375,44.328125],[359.0625,44.09375],[359.7265625,43.88671875],[360.34375,43.703125],[360.921875,43.5390625],[361.46875,43.390625],[361.9921875,43.25390625],[362.5,43.125],[363,43],[363.5,42.875],[364,42.751953125],[364.5,42.6328125],[365,42.51953125],[365.5,42.4140625],[366,42.318359375],[366.5,42.234375],[367,42.1640625],[367.5,42.109375],[368,42.06640625],[368.5,42.03125],[369,42],[369.5,41.96875],[370,41.93359375],[370.5,41.890625],[371,41.8359375],[371.5,41.765625],[372.001953125,41.68359375],[372.5078125,41.59375],[373.01953125,41.5],[373.5390625,41.40625],[374.068359375,41.31640625],[374.609375,41.234375],[375.1640625,41.1640625],[375.734375,41.109375],[376.314453125,41.0703125],[376.8984375,41.046875],[377.48046875,41.0390625],[378.0546875,41.046875],[378.615234375,41.0703125],[379.15625,41.109375],[379.671875,41.1640625],[380.15625,41.234375],[380.61328125,41.318359375],[381.046875,41.4140625],[381.4609375,41.51953125],[381.859375,41.6328125],[382.24609375,41.751953125],[382.625,41.875],[383,42],[383.375,42.125],[383.75,42.25],[384.125,42.375],[384.5,42.5],[384.875,42.625],[385.25,42.75],[385.625,42.875],[386,43],[386.375,43.125],[386.74609375,43.251953125],[387.109375,43.3828125],[387.4609375,43.51953125],[387.796875,43.6640625],[388.11328125,43.818359375],[388.40625,43.984375],[388.671875,44.1640625],[388.90625,44.359375],[389.11328125,44.5703125],[389.296875,44.796875],[389.4609375,45.0390625],[389.609375,45.296875],[389.74609375,45.5703125],[389.875,45.859375],[390,46.1640625],[390.125,46.484375],[390.248046875,46.818359375],[390.3671875,47.1640625],[390.48046875,47.51953125],[390.5859375,47.8828125],[390.681640625,48.251953125],[390.765625,48.625],[390.8359375,49],[390.890625,49.375],[390.931640625,49.755859375],[390.9609375,50.1484375],[390.98046875,50.55859375],[390.9921875,50.9921875],[390.998046875,51.455078125],[391,51.953125],[391,52.4921875],[391,53.078125],[390.998046875,53.703125],[390.9921875,54.359375],[390.98046875,55.0390625],[390.9609375,55.734375],[390.931640625,56.4375],[390.890625,57.140625],[390.8359375,57.8359375],[390.765625,58.515625],[390.6796875,59.185546875],[390.578125,59.8515625],[390.4609375,60.51953125],[390.328125,61.1953125],[390.1796875,61.884765625],[390.015625,62.59375],[389.8359375,63.328125],[389.640625,64.09375],[389.4296875,64.884765625],[389.203125,65.6953125],[388.9609375,66.51953125],[388.703125,67.3515625],[388.4296875,68.185546875],[388.140625,69.015625],[387.8359375,69.8359375],[387.515625,70.640625],[387.181640625,71.4296875],[386.8359375,72.203125],[386.48046875,72.9609375],[386.1171875,73.703125],[385.748046875,74.4296875],[385.375,75.140625],[385,75.8359375],[384.625,76.515625],[384.251953125,77.181640625],[383.8828125,77.8359375],[383.51953125,78.48046875],[383.1640625,79.1171875],[382.818359375,79.748046875],[382.484375,80.375],[382.1640625,81],[381.859375,81.625],[381.568359375,82.248046875],[381.2890625,82.8671875],[381.01953125,83.48046875],[380.7578125,84.0859375],[380.501953125,84.681640625],[380.25,85.265625],[380,85.8359375],[379.75,86.390625],[379.498046875,86.93359375],[379.2421875,87.46875],[378.98046875,88],[378.7109375,88.53125],[378.431640625,89.06640625],[378.140625,89.609375],[377.8359375,90.1640625],[377.515625,90.734375],[377.18359375,91.314453125],[376.84375,91.8984375],[376.5,92.48046875],[376.15625,93.0546875],[375.81640625,93.615234375],[375.484375,94.15625],[375.1640625,94.671875],[374.859375,95.15625],[374.568359375,95.611328125],[374.2890625,96.0390625],[374.01953125,96.44140625],[373.7578125,96.8203125],[373.501953125,97.177734375],[373.25,97.515625],[373,97.8359375],[372.75,98.140625],[372.501953125,98.431640625],[372.2578125,98.7109375],[372.01953125,98.98046875],[371.7890625,99.2421875],[371.568359375,99.498046875],[371.359375,99.75],[371.1640625,100],[370.984375,100.25],[370.818359375,100.498046875],[370.6640625,100.7421875],[370.51953125,100.98046875],[370.3828125,101.2109375],[370.251953125,101.431640625],[370.125,101.640625],[370,101.8359375],[369.875,102.015625],[369.751953125,102.18359375],[369.6328125,102.34375],[369.51953125,102.5],[369.4140625,102.65625],[369.318359375,102.81640625],[369.234375,102.984375],[369.1640625,103.1640625],[369.109375,103.359375],[369.06640625,103.564453125],[369.03125,103.7734375],[369,103.98046875],[368.96875,104.1796875],[368.93359375,104.365234375],[368.890625,104.53125],[368.8359375,104.671875],[368.765625,104.78125],[368.68359375,104.865234375],[368.59375,104.9296875],[368.5,104.98046875],[368.40625,105.0234375],[368.31640625,105.064453125],[368.234375,105.109375],[368.1640625,105.1640625],[368.109375,105.234375],[368.068359375,105.318359375],[368.0390625,105.4140625],[368.01953125,105.51953125],[368.0078125,105.6328125],[368.001953125,105.751953125],[368,105.875],[368,106],[368,106.125],[367.998046875,106.25],[367.9921875,106.375],[367.98046875,106.5],[367.9609375,106.625],[367.931640625,106.75],[367.890625,106.875],[367.8359375,107],[367.765625,107.125],[367.68359375,107.25],[367.59375,107.375],[367.5,107.5],[367.40625,107.625],[367.31640625,107.75],[367.234375,107.875],[367.1640625,108],[367.109375,108.125],[367.06640625,108.25390625],[367.03125,108.390625],[367,108.5390625],[366.96875,108.703125],[366.93359375,108.88671875],[366.890625,109.09375],[366.8359375,109.328125],[366.765625,109.59375],[366.681640625,109.884765625],[366.5859375,110.1953125],[366.48046875,110.51953125],[366.3671875,110.8515625],[366.248046875,111.185546875],[366.125,111.515625],[366,111.8359375],[365.875,112.140625],[365.75,112.43359375],[365.625,112.71875],[365.5,113],[365.375,113.28125],[365.25,113.56640625],[365.125,113.859375],[365,114.1640625],[364.875,114.484375],[364.75,114.8203125],[364.625,115.171875],[364.5,115.5390625],[364.375,115.921875],[364.25,116.3203125],[364.125,116.734375],[364,117.1640625],[363.875,117.609375],[363.751953125,118.06640625],[363.6328125,118.53125],[363.51953125,119],[363.4140625,119.46875],[363.318359375,119.93359375],[363.234375,120.390625],[363.1640625,120.8359375],[363.109375,121.265625],[363.068359375,121.68359375],[363.0390625,122.09375],[363.01953125,122.5],[363.0078125,122.90625],[363.001953125,123.31640625],[363,123.734375],[363,124.1640625],[363,124.609375],[363,125.064453125],[363,125.5234375],[363,125.98046875],[363,126.4296875],[363,126.865234375],[363,127.28125],[363,127.671875],[363,128.03125],[363,128.361328125],[363,128.6640625],[363,128.94140625],[363,129.1953125],[363,129.427734375],[363,129.640625],[363,129.8359375],[363,130.015625],[363,130.181640625],[363,130.3359375],[363,130.48046875],[363,130.6171875],[363,130.748046875],[363,130.875],[363,131],[363,131.125],[363,131.248046875],[363,131.3671875],[363,131.48046875],[363,131.5859375],[363,131.681640625],[363,131.765625],[363,131.8359375],[363,131.890625],[363,131.931640625],[363,131.9609375],[363,131.98046875],[363,131.9921875],[363,131.998046875],[363,132]],pointSize:10,pointColor:"#bb2a2a"},id:"95bb871f-b283-ab76-21d0-968c0175c7b1"},previousShapeId:"70dce112-c0c8-c3db-3f23-e8ecaec67d28"}},{displayName:"Yule Lord",sentAt:"12:53:15",message:{action:"shape",shape:{className:"LinePath",data:{order:3,tailSize:3,smooth:!0,pointCoordinatePairs:[[360,163],[363,177],[364,178],[364,179],[364,180]],smoothedPointCoordinatePairs:[[360,163],[360.005859375,163.02734375],[360.0234375,163.109375],[360.05859375,163.2734375],[360.1171875,163.546875],[360.205078125,163.95703125],[360.328125,164.53125],[360.4921875,165.296875],[360.703125,166.28125],[360.951171875,167.431640625],[361.2265625,168.6953125],[361.51953125,170.01953125],[361.8203125,171.3515625],[362.119140625,172.638671875],[362.40625,173.828125],[362.671875,174.8671875],[362.90625,175.703125],[363.111328125,176.361328125],[363.2890625,176.8671875],[363.44140625,177.24609375],[363.5703125,177.5234375],[363.677734375,177.724609375],[363.765625,177.875],[363.8359375,178],[363.890625,178.125],[363.931640625,178.25],[363.9609375,178.375],[363.98046875,178.5],[363.9921875,178.625],[363.998046875,178.75],[364,178.875],[364,179],[364,179.125],[364,179.248046875],[364,179.3671875],[364,179.48046875],[364,179.5859375],[364,179.681640625],[364,179.765625],[364,179.8359375],[364,179.890625],[364,179.931640625],[364,179.9609375],[364,179.98046875],[364,179.9921875],[364,179.998046875],[364,180]],pointSize:10,pointColor:"#bb2a2a"},id:"afa9b7e1-b901-f704-6e9d-b96b0c68f7b3"},previousShapeId:"95bb871f-b283-ab76-21d0-968c0175c7b1"}},{displayName:"Yule Lord",sentAt:"12:53:16",message:{action:"turnOnDrawing"}},{displayName:"Santa Claus",sentAt:"12:53:24",message:{action:"shape",shape:{className:"LinePath",data:{order:3,tailSize:3,smooth:!0,pointCoordinatePairs:[[502,81],[517,76],[528,74],[539,72],[546,71],[555,71],[559,71],[564,72],[566,74],[567,79],[568,85],[562,97],[551,109],[545,116],[536,124],[532,128],[528,129],[527,130],[526,131],[527,131],[532,129],[538,127],[550,122],[556,120],[568,117],[574,116],[582,116],[587,116],[593,119],[596,121],[600,123],[603,126],[606,129],[610,134],[612,139],[613,146],[613,153],[612,161],[601,177],[593,184],[574,195],[547,208],[536,212],[519,216],[507,216],[494,217],[481,216],[480,216],[478,216],[476,215],[476,214]],smoothedPointCoordinatePairs:[[502,81],[502.029296875,80.990234375],[502.1171875,80.9609375],[502.29296875,80.90234375],[502.5859375,80.8046875],[503.025390625,80.658203125],[503.640625,80.453125],[504.4609375,80.1796875],[505.515625,79.828125],[506.767578125,79.4140625],[508.1796875,78.953125],[509.71484375,78.4609375],[511.3359375,77.953125],[513.005859375,77.4453125],[514.6875,76.953125],[516.34375,76.4921875],[517.9375,76.078125],[519.4765625,75.705078125],[520.96875,75.3671875],[522.421875,75.05859375],[523.84375,74.7734375],[525.2421875,74.505859375],[526.625,74.25],[528,74],[529.375,73.75],[530.7421875,73.501953125],[532.09375,73.2578125],[533.421875,73.01953125],[534.71875,72.7890625],[535.9765625,72.568359375],[537.1875,72.359375],[538.34375,72.1640625],[539.4375,71.984375],[540.48046875,71.8203125],[541.484375,71.671875],[542.4609375,71.5390625],[543.421875,71.421875],[544.37890625,71.3203125],[545.34375,71.234375],[546.328125,71.1640625],[547.34375,71.109375],[548.376953125,71.068359375],[549.4140625,71.0390625],[550.44140625,71.01953125],[551.4453125,71.0078125],[552.412109375,71.001953125],[553.328125,71],[554.1796875,71],[554.953125,71],[555.66015625,71.001953125],[556.3125,71.0078125],[556.921875,71.01953125],[557.5,71.0390625],[558.05859375,71.068359375],[558.609375,71.109375],[559.1640625,71.1640625],[559.734375,71.234375],[560.3125,71.3203125],[560.890625,71.421875],[561.4609375,71.5390625],[562.015625,71.671875],[562.546875,71.8203125],[563.046875,71.984375],[563.5078125,72.1640625],[563.921875,72.359375],[564.29296875,72.57421875],[564.625,72.8125],[564.921875,73.078125],[565.1875,73.375],[565.42578125,73.70703125],[565.640625,74.078125],[565.8359375,74.4921875],[566.015625,74.953125],[566.181640625,75.45703125],[566.3359375,76],[566.48046875,76.578125],[566.6171875,77.1875],[566.748046875,77.82421875],[566.875,78.484375],[567,79.1640625],[567.125,79.859375],[567.236328125,80.580078125],[567.3203125,81.3359375],[567.36328125,82.13671875],[567.3515625,82.9921875],[567.271484375,83.912109375],[567.109375,84.90625],[566.8515625,85.984375],[566.484375,87.15625],[566.01171875,88.41015625],[565.4375,89.734375],[564.765625,91.1171875],[564,92.546875],[563.14453125,94.01171875],[562.203125,95.5],[561.1796875,97],[560.078125,98.5],[558.91796875,99.990234375],[557.71875,101.4609375],[556.5,102.90234375],[555.28125,104.3046875],[554.08203125,105.658203125],[552.921875,106.953125],[551.8203125,108.1796875],[550.796875,109.328125],[549.8359375,110.41015625],[548.921875,111.4375],[548.0390625,112.421875],[547.171875,113.375],[546.3046875,114.30859375],[545.421875,115.234375],[544.5078125,116.1640625],[543.546875,117.109375],[542.5546875,118.060546875],[541.546875,119.0078125],[540.5390625,119.94140625],[539.546875,120.8515625],[538.5859375,121.728515625],[537.671875,122.5625],[536.8203125,123.34375],[536.046875,124.0625],[535.341796875,124.720703125],[534.6953125,125.3203125],[534.09765625,125.86328125],[533.5390625,126.3515625],[533.009765625,126.787109375],[532.5,127.171875],[532,127.5078125],[531.5,127.796875],[531.005859375,128.044921875],[530.5234375,128.2578125],[530.05859375,128.44140625],[529.6171875,128.6015625],[529.205078125,128.744140625],[528.828125,128.875],[528.4921875,129],[528.203125,129.125],[527.955078125,129.25],[527.7421875,129.375],[527.55859375,129.5],[527.3984375,129.625],[527.255859375,129.75],[527.125,129.875],[527,130],[526.875,130.125],[526.75390625,130.248046875],[526.640625,130.3671875],[526.5390625,130.48046875],[526.453125,130.5859375],[526.38671875,130.681640625],[526.34375,130.765625],[526.328125,130.8359375],[526.34375,130.890625],[526.39453125,130.927734375],[526.484375,130.9453125],[526.6171875,130.94140625],[526.796875,130.9140625],[527.02734375,130.861328125],[527.3125,130.78125],[527.65625,130.671875],[528.0625,130.53125],[528.525390625,130.36328125],[529.0390625,130.171875],[529.59765625,129.9609375],[530.1953125,129.734375],[530.826171875,129.49609375],[531.484375,129.25],[532.1640625,129],[532.859375,128.75],[533.580078125,128.494140625],[534.3359375,128.2265625],[535.13671875,127.94140625],[535.9921875,127.6328125],[536.912109375,127.294921875],[537.90625,126.921875],[538.984375,126.5078125],[540.15625,126.046875],[541.3984375,125.55078125],[542.6875,125.03125],[544,124.5],[545.3125,123.96875],[546.6015625,123.44921875],[547.84375,122.953125],[549.015625,122.4921875],[550.09375,122.078125],[551.1015625,121.703125],[552.0625,121.359375],[553,121.0390625],[553.9375,120.734375],[554.8984375,120.4375],[555.90625,120.140625],[556.984375,119.8359375],[558.15625,119.515625],[559.3984375,119.185546875],[560.6875,118.8515625],[562,118.51953125],[563.3125,118.1953125],[564.6015625,117.884765625],[565.84375,117.59375],[567.015625,117.328125],[568.09375,117.09375],[569.09375,116.888671875],[570.03125,116.7109375],[570.921875,116.55859375],[571.78125,116.4296875],[572.625,116.322265625],[573.46875,116.234375],[574.328125,116.1640625],[575.21875,116.109375],[576.130859375,116.068359375],[577.0546875,116.0390625],[577.98046875,116.01953125],[578.8984375,116.0078125],[579.798828125,116.001953125],[580.671875,116],[581.5078125,116],[582.296875,116],[583.046875,116.005859375],[583.765625,116.0234375],[584.4609375,116.05859375],[585.140625,116.1171875],[585.8125,116.205078125],[586.484375,116.328125],[587.1640625,116.4921875],[587.859375,116.703125],[588.5625,116.953125],[589.265625,117.234375],[589.9609375,117.5390625],[590.640625,117.859375],[591.296875,118.1875],[591.921875,118.515625],[592.5078125,118.8359375],[593.046875,119.140625],[593.546875,119.431640625],[594.015625,119.7109375],[594.4609375,119.98046875],[594.890625,120.2421875],[595.3125,120.498046875],[595.734375,120.75],[596.1640625,121],[596.609375,121.25],[597.06640625,121.501953125],[597.53125,121.7578125],[598,122.01953125],[598.46875,122.2890625],[598.93359375,122.568359375],[599.390625,122.859375],[599.8359375,123.1640625],[600.265625,123.484375],[600.681640625,123.818359375],[601.0859375,124.1640625],[601.48046875,124.51953125],[601.8671875,124.8828125],[602.248046875,125.251953125],[602.625,125.625],[603,126],[603.375,126.375],[603.751953125,126.75390625],[604.1328125,127.140625],[604.51953125,127.5390625],[604.9140625,127.953125],[605.318359375,128.38671875],[605.734375,128.84375],[606.1640625,129.328125],[606.609375,129.84375],[607.064453125,130.38671875],[607.5234375,130.953125],[607.98046875,131.5390625],[608.4296875,132.140625],[608.865234375,132.75390625],[609.28125,133.375],[609.671875,134],[610.03125,134.625],[610.361328125,135.25390625],[610.6640625,135.890625],[610.94140625,136.5390625],[611.1953125,137.203125],[611.427734375,137.88671875],[611.640625,138.59375],[611.8359375,139.328125],[612.015625,140.09375],[612.1796875,140.88671875],[612.328125,141.703125],[612.4609375,142.5390625],[612.578125,143.390625],[612.6796875,144.25390625],[612.765625,145.125],[612.8359375,146],[612.890625,146.875],[612.9296875,147.751953125],[612.953125,148.6328125],[612.9609375,149.51953125],[612.953125,150.4140625],[612.9296875,151.318359375],[612.890625,152.234375],[612.8359375,153.1640625],[612.765625,154.109375],[612.662109375,155.083984375],[612.5078125,156.1015625],[612.28515625,157.17578125],[611.9765625,158.3203125],[611.564453125,159.548828125],[611.03125,160.875],[610.359375,162.3125],[609.53125,163.875],[608.572265625,165.529296875],[607.5078125,167.2421875],[606.36328125,168.98046875],[605.1640625,170.7109375],[603.935546875,172.400390625],[602.703125,174.015625],[601.4921875,175.5234375],[600.328125,176.890625],[599.18359375,178.142578125],[598.03125,179.3046875],[596.84375,180.40234375],[595.59375,181.4609375],[594.25390625,182.505859375],[592.796875,183.5625],[591.1953125,184.65625],[589.421875,185.8125],[587.482421875,187.02734375],[585.3828125,188.296875],[583.12890625,189.6171875],[580.7265625,190.984375],[578.181640625,192.39453125],[575.5,193.84375],[572.6875,195.328125],[569.75,196.84375],[566.734375,198.369140625],[563.6875,199.8828125],[560.65625,201.36328125],[557.6875,202.7890625],[554.828125,204.138671875],[552.125,205.390625],[549.625,206.5234375],[547.375,207.515625],[545.33203125,208.384765625],[543.453125,209.1484375],[541.6953125,209.82421875],[540.015625,210.4296875],[538.37109375,210.982421875],[536.71875,211.5],[535.015625,212],[533.21875,212.5],[531.349609375,212.9921875],[529.4296875,213.46875],[527.48046875,213.921875],[525.5234375,214.34375],[523.580078125,214.7265625],[521.671875,215.0625],[519.8203125,215.34375],[518.046875,215.5625],[516.33984375,215.728515625],[514.6875,215.8515625],[513.078125,215.94140625],[511.5,216.0078125],[509.94140625,216.060546875],[508.390625,216.109375],[506.8359375,216.1640625],[505.265625,216.234375],[503.681640625,216.314453125],[502.0859375,216.3984375],[500.48046875,216.48046875],[498.8671875,216.5546875],[497.248046875,216.615234375],[495.625,216.65625],[494,216.671875],[492.375,216.65625],[490.7734375,216.615234375],[489.21875,216.5546875],[487.734375,216.48046875],[486.34375,216.3984375],[485.0703125,216.314453125],[483.9375,216.234375],[482.96875,216.1640625],[482.1875,216.109375],[481.568359375,216.068359375],[481.0859375,216.0390625],[480.71484375,216.01953125],[480.4296875,216.0078125],[480.205078125,216.001953125],[480.015625,216],[479.8359375,216],[479.640625,216],[479.431640625,215.998046875],[479.2109375,215.9921875],[478.98046875,215.98046875],[478.7421875,215.9609375],[478.498046875,215.931640625],[478.25,215.890625],[478,215.8359375],[477.75,215.765625],[477.50390625,215.681640625],[477.265625,215.5859375],[477.0390625,215.48046875],[476.828125,215.3671875],[476.63671875,215.248046875],[476.46875,215.125],[476.328125,215],[476.21875,214.875],[476.13671875,214.751953125],[476.078125,214.6328125],[476.0390625,214.51953125],[476.015625,214.4140625],[476.00390625,214.318359375],[476,214.234375],[476,214.1640625],[476,214.109375],[476,214.068359375],[476,214.0390625],[476,214.01953125],[476,214.0078125],[476,214.001953125],[476,214]],pointSize:4,pointColor:"grey"},id:"51d6df46-2a97-d44f-dfa9-8b069e1cbe47"},previousShapeId:"afa9b7e1-b901-f704-6e9d-b96b0c68f7b3"}},{displayName:"Santa Claus",sentAt:"12:53:25",message:{action:"shape",shape:{className:"LinePath",data:{order:3,tailSize:3,smooth:!0,pointCoordinatePairs:[[638,71],[643,79],[645,82],[647,85],[647,86],[648,87],[648,88],[648,89],[649,90],[649,91],[648,92]],smoothedPointCoordinatePairs:[[638,71],[638.009765625,71.015625],[638.0390625,71.0625],[638.09765625,71.15625],[638.1953125,71.3125],[638.341796875,71.546875],[638.546875,71.875],[638.8203125,72.3125],[639.171875,72.875],[639.5859375,73.537109375],[640.046875,74.2734375],[640.5390625,75.05859375],[641.046875,75.8671875],[641.5546875,76.673828125],[642.046875,77.453125],[642.5078125,78.1796875],[642.921875,78.828125],[643.294921875,79.408203125],[643.6328125,79.9296875],[643.94140625,80.40234375],[644.2265625,80.8359375],[644.494140625,81.240234375],[644.75,81.625],[645,82],[645.25,82.375],[645.49609375,82.74609375],[645.734375,83.109375],[645.9609375,83.4609375],[646.171875,83.796875],[646.36328125,84.11328125],[646.53125,84.40625],[646.671875,84.671875],[646.78125,84.90625],[646.865234375,85.11328125],[646.9296875,85.296875],[646.98046875,85.4609375],[647.0234375,85.609375],[647.064453125,85.74609375],[647.109375,85.875],[647.1640625,86],[647.234375,86.125],[647.31640625,86.25],[647.40625,86.375],[647.5,86.5],[647.59375,86.625],[647.68359375,86.75],[647.765625,86.875],[647.8359375,87],[647.890625,87.125],[647.931640625,87.25],[647.9609375,87.375],[647.98046875,87.5],[647.9921875,87.625],[647.998046875,87.75],[648,87.875],[648,88],[648,88.125],[648.001953125,88.25],[648.0078125,88.375],[648.01953125,88.5],[648.0390625,88.625],[648.068359375,88.75],[648.109375,88.875],[648.1640625,89],[648.234375,89.125],[648.31640625,89.25],[648.40625,89.375],[648.5,89.5],[648.59375,89.625],[648.68359375,89.75],[648.765625,89.875],[648.8359375,90],[648.890625,90.125],[648.9296875,90.25],[648.953125,90.375],[648.9609375,90.5],[648.953125,90.625],[648.9296875,90.75],[648.890625,90.875],[648.8359375,91],[648.765625,91.125],[648.68359375,91.248046875],[648.59375,91.3671875],[648.5,91.48046875],[648.40625,91.5859375],[648.31640625,91.681640625],[648.234375,91.765625],[648.1640625,91.8359375],[648.109375,91.890625],[648.068359375,91.931640625],[648.0390625,91.9609375],[648.01953125,91.98046875],[648.0078125,91.9921875],[648.001953125,91.998046875],[648,92]],pointSize:4,pointColor:"grey"},id:"041b2e5f-e7f3-292b-b24a-e31f425e76e0"},previousShapeId:"51d6df46-2a97-d44f-dfa9-8b069e1cbe47"}},{displayName:"Santa Claus",sentAt:"12:53:26",message:{action:"shape",shape:{className:"LinePath",data:{order:3,tailSize:3,smooth:!0,pointCoordinatePairs:[[663,54],[671,74],[672,75],[672,76],[672,77],[673,78]],smoothedPointCoordinatePairs:[[663,54],[663.015625,54.0390625],[663.0625,54.15625],[663.15625,54.390625],[663.3125,54.78125],[663.546875,55.3671875],[663.875,56.1875],[664.3125,57.28125],[664.875,58.6875],[665.533203125,60.330078125],[666.2578125,62.1328125],[667.01953125,64.01953125],[667.7890625,65.9140625],[668.537109375,67.740234375],[669.234375,69.421875],[669.8515625,70.8828125],[670.359375,72.046875],[670.76953125,72.951171875],[671.09375,73.6328125],[671.34375,74.12890625],[671.53125,74.4765625],[671.66796875,74.712890625],[671.765625,74.875],[671.8359375,75],[671.890625,75.125],[671.931640625,75.25],[671.9609375,75.375],[671.98046875,75.5],[671.9921875,75.625],[671.998046875,75.75],[672,75.875],[672,76],[672,76.125],[672.001953125,76.25],[672.0078125,76.375],[672.01953125,76.5],[672.0390625,76.625],[672.068359375,76.75],[672.109375,76.875],[672.1640625,77],[672.234375,77.125],[672.31640625,77.248046875],[672.40625,77.3671875],[672.5,77.48046875],[672.59375,77.5859375],[672.68359375,77.681640625],[672.765625,77.765625],[672.8359375,77.8359375],[672.890625,77.890625],[672.931640625,77.931640625],[672.9609375,77.9609375],[672.98046875,77.98046875],[672.9921875,77.9921875],[672.998046875,77.998046875],[673,78]],pointSize:4,pointColor:"grey"},id:"c8de1392-8bff-e6f4-1b5b-e2a441fe0d7e"},previousShapeId:"041b2e5f-e7f3-292b-b24a-e31f425e76e0"}},{displayName:"Santa Claus",sentAt:"12:53:27",message:{action:"shape",shape:{className:"LinePath",data:{order:3,tailSize:3,smooth:!0,pointCoordinatePairs:[[648,124],[653,127],[657,128],[660,130],[663,131],[665,132],[668,133],[670,134],[673,134],[677,134],[680,134],[684,132],[690,130],[693,127],[695,125],[697,123],[699,119],[700,116],[702,113],[703,110],[705,107],[705,104],[706,102],[707,100],[707,98],[707,97],[707,96],[707,95],[707,94],[707,93],[706,93],[705,93],[704,93]],smoothedPointCoordinatePairs:[[648,124],[648.009765625,124.005859375],[648.0390625,124.0234375],[648.09765625,124.05859375],[648.1953125,124.1171875],[648.341796875,124.205078125],[648.546875,124.328125],[648.8203125,124.4921875],[649.171875,124.703125],[649.58984375,124.951171875],[650.0625,125.2265625],[650.578125,125.51953125],[651.125,125.8203125],[651.69140625,126.119140625],[652.265625,126.40625],[652.8359375,126.671875],[653.390625,126.90625],[653.9296875,127.115234375],[654.453125,127.3046875],[654.9609375,127.48046875],[655.453125,127.6484375],[655.9296875,127.814453125],[656.390625,127.984375],[656.8359375,128.1640625],[657.265625,128.359375],[657.681640625,128.56640625],[658.0859375,128.78125],[658.48046875,129],[658.8671875,129.21875],[659.248046875,129.43359375],[659.625,129.640625],[660,129.8359375],[660.375,130.015625],[660.748046875,130.181640625],[661.1171875,130.3359375],[661.48046875,130.48046875],[661.8359375,130.6171875],[662.181640625,130.748046875],[662.515625,130.875],[662.8359375,131],[663.140625,131.125],[663.43359375,131.25],[663.71875,131.375],[664,131.5],[664.28125,131.625],[664.56640625,131.75],[664.859375,131.875],[665.1640625,132],[665.484375,132.125],[665.81640625,132.25],[666.15625,132.375],[666.5,132.5],[666.84375,132.625],[667.18359375,132.75],[667.515625,132.875],[667.8359375,133],[668.140625,133.125],[668.43359375,133.248046875],[668.71875,133.3671875],[669,133.48046875],[669.28125,133.5859375],[669.56640625,133.681640625],[669.859375,133.765625],[670.1640625,133.8359375],[670.484375,133.890625],[670.8203125,133.931640625],[671.171875,133.9609375],[671.5390625,133.98046875],[671.921875,133.9921875],[672.3203125,133.998046875],[672.734375,134],[673.1640625,134],[673.609375,134],[674.06640625,134],[674.53125,134],[675,134],[675.46875,134],[675.93359375,134],[676.390625,134],[676.8359375,134],[677.265625,134],[677.68359375,133.99609375],[678.09375,133.984375],[678.5,133.9609375],[678.90625,133.921875],[679.31640625,133.86328125],[679.734375,133.78125],[680.1640625,133.671875],[680.609375,133.53125],[681.072265625,133.36328125],[681.5546875,133.171875],[682.05859375,132.9609375],[682.5859375,132.734375],[683.138671875,132.49609375],[683.71875,132.25],[684.328125,132],[684.96875,131.75],[685.630859375,131.498046875],[686.3046875,131.2421875],[686.98046875,130.98046875],[687.6484375,130.7109375],[688.298828125,130.431640625],[688.921875,130.140625],[689.5078125,129.8359375],[690.046875,129.515625],[690.54296875,129.18359375],[691,128.84375],[691.421875,128.5],[691.8125,128.15625],[692.17578125,127.81640625],[692.515625,127.484375],[692.8359375,127.1640625],[693.140625,126.859375],[693.431640625,126.568359375],[693.7109375,126.2890625],[693.98046875,126.01953125],[694.2421875,125.7578125],[694.498046875,125.501953125],[694.75,125.25],[695,125],[695.25,124.75],[695.5,124.49609375],[695.75,124.234375],[696,123.9609375],[696.25,123.671875],[696.5,123.36328125],[696.75,123.03125],[697,122.671875],[697.25,122.28125],[697.498046875,121.865234375],[697.7421875,121.4296875],[697.98046875,120.98046875],[698.2109375,120.5234375],[698.431640625,120.064453125],[698.640625,119.609375],[698.8359375,119.1640625],[699.015625,118.734375],[699.18359375,118.318359375],[699.34375,117.9140625],[699.5,117.51953125],[699.65625,117.1328125],[699.81640625,116.751953125],[699.984375,116.375],[700.1640625,116],[700.359375,115.625],[700.56640625,115.25],[700.78125,114.875],[701,114.5],[701.21875,114.125],[701.43359375,113.75],[701.640625,113.375],[701.8359375,113],[702.015625,112.625],[702.18359375,112.25],[702.34375,111.875],[702.5,111.5],[702.65625,111.125],[702.81640625,110.75],[702.984375,110.375],[703.1640625,110],[703.359375,109.625],[703.564453125,109.25],[703.7734375,108.875],[703.98046875,108.5],[704.1796875,108.125],[704.365234375,107.75],[704.53125,107.375],[704.671875,107],[704.78125,106.625],[704.865234375,106.251953125],[704.9296875,105.8828125],[704.98046875,105.51953125],[705.0234375,105.1640625],[705.064453125,104.818359375],[705.109375,104.484375],[705.1640625,104.1640625],[705.234375,103.859375],[705.318359375,103.568359375],[705.4140625,103.2890625],[705.51953125,103.01953125],[705.6328125,102.7578125],[705.751953125,102.501953125],[705.875,102.25],[706,102],[706.125,101.75],[706.248046875,101.5],[706.3671875,101.25],[706.48046875,101],[706.5859375,100.75],[706.681640625,100.5],[706.765625,100.25],[706.8359375,100],[706.890625,99.75],[706.931640625,99.501953125],[706.9609375,99.2578125],[706.98046875,99.01953125],[706.9921875,98.7890625],[706.998046875,98.568359375],[707,98.359375],[707,98.1640625],[707,97.984375],[707,97.818359375],[707,97.6640625],[707,97.51953125],[707,97.3828125],[707,97.251953125],[707,97.125],[707,97],[707,96.875],[707,96.75],[707,96.625],[707,96.5],[707,96.375],[707,96.25],[707,96.125],[707,96],[707,95.875],[707,95.75],[707,95.625],[707,95.5],[707,95.375],[707,95.25],[707,95.125],[707,95],[707,94.875],[707,94.75],[707,94.625],[707,94.5],[707,94.375],[707,94.25],[707,94.125],[707,94],[707,93.875],[706.998046875,93.751953125],[706.9921875,93.6328125],[706.98046875,93.51953125],[706.9609375,93.4140625],[706.931640625,93.318359375],[706.890625,93.234375],[706.8359375,93.1640625],[706.765625,93.109375],[706.681640625,93.068359375],[706.5859375,93.0390625],[706.48046875,93.01953125],[706.3671875,93.0078125],[706.248046875,93.001953125],[706.125,93],[706,93],[705.875,93],[705.75,93],[705.625,93],[705.5,93],[705.375,93],[705.25,93],[705.125,93],[705,93],[704.875,93],[704.751953125,93],[704.6328125,93],[704.51953125,93],[704.4140625,93],[704.318359375,93],[704.234375,93],[704.1640625,93],[704.109375,93],[704.068359375,93],[704.0390625,93],[704.01953125,93],[704.0078125,93],[704.001953125,93],[704,93]],
pointSize:4,pointColor:"grey"},id:"26c311c1-7198-6432-d8bc-a458e9701b56"},previousShapeId:"c8de1392-8bff-e6f4-1b5b-e2a441fe0d7e"}},{displayName:"Yule Lord",sentAt:"12:53:32",message:{action:"blah"}}];lcr=new o(c),lcr.processActions(p)},{"./index.js":9}],9:[function(t,e,n){function i(t){t=t||{};var e=r.init(t.canvasElement,t.lcOptions);e.setTool(new r.tools.Eyedropper(e));var n=new a({canvasElement:t.canvasElement}),i=new o(e,n),h=new s({canvasElement:t.canvasElement}),c=function(t){t=l(t),h.loadActions(t,function(e){u(t,e)}),u(t,t.length)},u=function(t,e){i.execute("clear"),n.startReplay(),e>t.length-1&&(e=t.length-1);for(var r=0;e>=r;r++)action=t[r],i.execute(action.message.action,action.message);h.setActiveDot(e),n.endReplay()},l=function(t){return t.filter(function(t){return i.allowedActions.filter(function(e){return t.message.action==e}).length>0})};return{processActions:c}}var r=t("./vendor/literallycanvas-core.min.js"),o=t("./actions/actions.js"),s=t("./controls/frame_controls.js"),a=t("./indicators/indicators.js");e.exports=i,window.LCR=i},{"./actions/actions.js":1,"./controls/frame_controls.js":7,"./indicators/indicators.js":10,"./vendor/literallycanvas-core.min.js":13}],10:[function(t,e,n){function i(t){var e=[new r],n=function(t){e.forEach(function(e){e.addElement(t)})},i=function(){e.forEach(function(t){t.clear()})},o=function(){e.forEach(function(t){t.runPending()})},s=function(t){return filtered=e.filter(function(e){return e.name===t}),null!=filtered?filtered[0]:void 0},a=function(){i()},h=function(){o()};return n(t.canvasElement),{findByName:s,startReplay:a,endReplay:h}}var r=t("./student_drawing.js");e.exports=i},{"./student_drawing.js":11}],11:[function(t,e,n){function i(){var t="studentDrawing",e=null,n=!0,i=document.createElement("div");i.innerText="Student Drawing";var o=new r(i),s=function(t){t.appendChild(i)},a=function(t){e=t,n||(e?o.changeClass("student-drawing active"):o.changeClass("student-drawing"))},h=function(){e=!1,n=!0},c=function(){n=!1,a(e)};return h(),{name:t,updateState:a,addElement:s,clear:h,runPending:c}}var r=t("../utils/shiny-transition.js");e.exports=i},{"../utils/shiny-transition.js":12}],12:[function(t,e,n){function i(t){var e=function(e){var n=t.className.replace("transitioning ","");if(e!=n){if(""==n)return void(t.className=e);var i=function(){t.className=e};t.addEventListener("transitionend",i),t.className="transitioning "+e}};return{changeClass:e}}e.exports=i},{}],13:[function(t,e,n){(function(i){!function(t){if("object"==typeof n)e.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var r;"undefined"!=typeof window?r=window:"undefined"!=typeof i?r=i:"undefined"!=typeof self&&(r=self),r.LC=t()}}(function(){return function e(n,i,r){function o(a,h){if(!i[a]){if(!n[a]){var c="function"==typeof t&&t;if(!h&&c)return c(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=i[a]={exports:{}};n[a][0].call(u.exports,function(t){var e=n[a][1][t];return o(e?e:t)},u,u.exports,e,n,i,r)}return i[a].exports}for(var s="function"==typeof t&&t,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){var i,r,o,s,a,h,c,u,l,p,d,f,g,m,y,S=function(t,e){return function(){return t.apply(e,arguments)}},v=[].slice,x=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};a=t("./actions"),h=t("./bindEvents"),u=t("./math"),y=t("./shapes"),c=y.createShape,g=y.shapeToJSON,r=y.JSONToShape,l=t("./canvasRenderer").renderShapeToContext,p=t("./svgRenderer").renderShapeToSVG,d=t("./renderSnapshotToImage"),f=t("./renderSnapshotToSVG"),s=t("../tools/Pencil"),m=t("./util"),i="infinite",e.exports=o=function(){function t(t,e){this.containerEl=t,this.setImageSize=S(this.setImageSize,this),this._unsubscribeEvents=h(this,this.containerEl,e.keyboardShortcuts),this.opts=e,this.config={zoomMin:e.zoomMin||.2,zoomMax:e.zoomMax||4,zoomStep:e.zoomStep||.2},this.colors={primary:e.primaryColor||"#000",secondary:e.secondaryColor||"#fff",background:e.backgroundColor||"transparent"},this.containerEl.style["background-color"]=this.colors.background,this.watermarkImage=e.watermarkImage,this.watermarkScale=e.watermarkScale||1,this.backgroundCanvas=document.createElement("canvas"),this.backgroundCtx=this.backgroundCanvas.getContext("2d"),this.containerEl.appendChild(this.backgroundCanvas),this.backgroundShapes=e.backgroundShapes||[],this._shapesInProgress=[],this.canvas=document.createElement("canvas"),this.canvas.style["background-color"]="transparent",this.containerEl.appendChild(this.canvas),this.buffer=document.createElement("canvas"),this.buffer.style["background-color"]="transparent",this.ctx=this.canvas.getContext("2d"),this.bufferCtx=this.buffer.getContext("2d"),this.backingScale=m.getBackingScale(this.ctx),this.shapes=[],this.undoStack=[],this.redoStack=[],this.isDragging=!1,this.position={x:0,y:0},this.scale=1,this.setTool(new this.opts.tools[0](this)),this.width=e.imageSize.width||i,this.height=e.imageSize.height||i,this.setZoom(this.scale),m.matchElementSize(this.containerEl,[this.backgroundCanvas,this.canvas],this.backingScale,function(t){return function(){return t.keepPanInImageBounds(),t.repaintAllLayers()}}(this)),this.watermarkImage&&(this.watermarkImage.onload=function(t){return function(){return t.repaintLayer("background")}}(this)),e.snapshot&&this.loadSnapshot(e.snapshot)}return t.prototype._teardown=function(){return this.tool.willBecomeInactive(this),this.tool=null,this._unsubscribeEvents()},t.prototype.trigger=function(t,e){return this.canvas.dispatchEvent(new CustomEvent(t,{detail:e})),null},t.prototype.on=function(t,e){var n;return n=function(t){return e(t.detail)},this.canvas.addEventListener(t,n),function(e){return function(){return e.canvas.removeEventListener(t,n)}}(this)},t.prototype.getRenderScale=function(){return this.scale*this.backingScale},t.prototype.clientCoordsToDrawingCoords=function(t,e){return{x:(t*this.backingScale-this.position.x)/this.getRenderScale(),y:(e*this.backingScale-this.position.y)/this.getRenderScale()}},t.prototype.drawingCoordsToClientCoords=function(t,e){return{x:t*this.getRenderScale()+this.position.x,y:e*this.getRenderScale()+this.position.y}},t.prototype.setImageSize=function(t,e){return this.width=t||i,this.height=e||i,this.keepPanInImageBounds(),this.repaintAllLayers(),this.trigger("imageSizeChange",{width:this.width,height:this.height})},t.prototype.setTool=function(t){var e;return null!=(e=this.tool)&&e.willBecomeInactive(this),this.tool=t,this.trigger("toolChange",{tool:t}),t.didBecomeActive(this)},t.prototype.setShapesInProgress=function(t){return this._shapesInProgress=t},t.prototype.pointerDown=function(t,e){var n;return n=this.clientCoordsToDrawingCoords(t,e),this.tool.usesSimpleAPI?(this.tool.begin(n.x,n.y,this),this.isDragging=!0,this.trigger("drawStart",{tool:this.tool})):(this.isDragging=!0,this.trigger("lc-pointerdown",{tool:this.tool,x:n.x,y:n.y,rawX:t,rawY:e}))},t.prototype.pointerMove=function(t,e){return m.requestAnimationFrame(function(n){return function(){var i;return i=n.clientCoordsToDrawingCoords(t,e),n.tool.usesSimpleAPI?n.isDragging?(n.tool["continue"](i.x,i.y,n),n.trigger("drawContinue",{tool:n.tool})):void 0:n.isDragging?n.trigger("lc-pointerdrag",{tool:n.tool,x:i.x,y:i.y,rawX:t,rawY:e}):n.trigger("lc-pointermove",{tool:n.tool,x:i.x,y:i.y,rawX:t,rawY:e})}}(this))},t.prototype.pointerUp=function(t,e){var n;return n=this.clientCoordsToDrawingCoords(t,e),this.tool.usesSimpleAPI?this.isDragging?(this.tool.end(n.x,n.y,this),this.isDragging=!1,this.trigger("drawEnd",{tool:this.tool})):void 0:(this.isDragging=!1,this.trigger("lc-pointerup",{tool:this.tool,x:n.x,y:n.y,rawX:t,rawY:e}))},t.prototype.setColor=function(t,e){switch(this.colors[t]=e,t){case"background":this.containerEl.style.backgroundColor=this.colors.background,this.repaintLayer("background");break;case"primary":this.repaintLayer("main");break;case"secondary":this.repaintLayer("main")}return this.trigger(""+t+"ColorChange",this.colors[t]),"background"===t?this.trigger("drawingChange"):void 0},t.prototype.getColor=function(t){return this.colors[t]},t.prototype.saveShape=function(t,e,n){return null==e&&(e=!0),null==n&&(n=null),n||(n=this.shapes.length?this.shapes[this.shapes.length-1].id:null),this.execute(new a.AddShapeAction(this,t,n)),e&&this.trigger("shapeSave",{shape:t,previousShapeId:n}),this.trigger("drawingChange")},t.prototype.pan=function(t,e){return this.setPan(this.position.x-t,this.position.y-e)},t.prototype.keepPanInImageBounds=function(){var t,e,n,r;return t=this.getRenderScale(),r=this.position,e=r.x,n=r.y,this.width!==i&&(e=this.canvas.width>this.width*t?(this.canvas.width-this.width*t)/2:Math.max(Math.min(0,e),this.canvas.width-this.width*t)),this.height!==i&&(n=this.canvas.height>this.height*t?(this.canvas.height-this.height*t)/2:Math.max(Math.min(0,n),this.canvas.height-this.height*t)),this.position={x:e,y:n}},t.prototype.setPan=function(t,e){return this.position={x:t,y:e},this.keepPanInImageBounds(),this.repaintAllLayers(),this.trigger("pan",{x:this.position.x,y:this.position.y})},t.prototype.zoom=function(t){var e;return e=this.scale+t,e=Math.max(e,this.config.zoomMin),e=Math.min(e,this.config.zoomMax),e=Math.round(100*e)/100,this.setZoom(e)},t.prototype.setZoom=function(t){var e;return e=this.scale,this.scale=t,this.position.x=u.scalePositionScalar(this.position.x,this.canvas.width,e,this.scale),this.position.y=u.scalePositionScalar(this.position.y,this.canvas.height,e,this.scale),this.keepPanInImageBounds(),this.repaintAllLayers(),this.trigger("zoom",{oldScale:e,newScale:this.scale})},t.prototype.setWatermarkImage=function(t){return this.watermarkImage=t,m.addImageOnload(t,function(t){return function(){return t.repaintLayer("background")}}(this)),t.width?this.repaintLayer("background"):void 0},t.prototype.repaintAllLayers=function(){var t,e,n,i;for(i=["background","main"],e=0,n=i.length;n>e;e++)t=i[e],this.repaintLayer(t);return null},t.prototype.repaintLayer=function(t,e){var n;switch(null==e&&(e="main"===t),t){case"background":this.backgroundCtx.clearRect(0,0,this.backgroundCanvas.width,this.backgroundCanvas.height),n=function(t){return function(){return t.repaintLayer("background")}}(this),this.watermarkImage&&this._renderWatermark(this.backgroundCtx,!0,n),this.draw(this.backgroundShapes,this.backgroundCtx,n);break;case"main":n=function(t){return function(){return t.repaintLayer("main",!0)}}(this),e&&(this.buffer.width=this.canvas.width,this.buffer.height=this.canvas.height,this.bufferCtx.clearRect(0,0,this.buffer.width,this.buffer.height),this.draw(this.shapes,this.bufferCtx,n)),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.width>0&&this.canvas.height>0&&(this.ctx.fillStyle="#ccc",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.clipped(function(t){return function(){return t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.ctx.drawImage(t.buffer,0,0)}}(this),this.ctx),this.clipped(function(t){return function(){return t.transformed(function(){var e,n,i,r,o;for(r=t._shapesInProgress,o=[],n=0,i=r.length;i>n;n++)e=r[n],o.push(l(t.ctx,e,{bufferCtx:t.bufferCtx,shouldOnlyDrawLatest:!0}));return o},t.ctx,t.bufferCtx)}}(this),this.ctx,this.bufferCtx))}return this.trigger("repaint",{layerKey:t})},t.prototype._renderWatermark=function(t,e,n){return null==e&&(e=!0),this.watermarkImage.width?(t.save(),t.translate(t.canvas.width/2,t.canvas.height/2),t.scale(this.watermarkScale,this.watermarkScale),e&&t.scale(this.backingScale,this.backingScale),t.drawImage(this.watermarkImage,-this.watermarkImage.width/2,-this.watermarkImage.height/2),t.restore()):void(this.watermarkImage.onload=n)},t.prototype.drawShapeInProgress=function(t){return this.setShapesInProgress([t]),this.repaintLayer("main",!1)},t.prototype.draw=function(t,e,n){var i;return t.length?(i=function(i){return function(){var i,r,o,s;for(s=[],r=0,o=t.length;o>r;r++)i=t[r],s.push(l(e,i,{retryCallback:n}));return s}}(this),this.clipped(function(t){return function(){return t.transformed(i,e)}}(this),e)):void 0},t.prototype.clipped=function(){var t,e,n,r,o,s,a,h,c,u,l,p;for(n=arguments[0],t=2<=arguments.length?v.call(arguments,1):[],s=this.width===i?0:this.position.x,a=this.height===i?0:this.position.y,o=function(){switch(this.width){case i:return this.canvas.width;default:return this.width*this.getRenderScale()}}.call(this),r=function(){switch(this.height){case i:return this.canvas.height;default:return this.height*this.getRenderScale()}}.call(this),h=0,u=t.length;u>h;h++)e=t[h],e.save(),e.beginPath(),e.rect(s,a,o,r),e.clip();for(n(),p=[],c=0,l=t.length;l>c;c++)e=t[c],p.push(e.restore());return p},t.prototype.transformed=function(){var t,e,n,i,r,o,s,a,h;for(n=arguments[0],t=2<=arguments.length?v.call(arguments,1):[],r=0,s=t.length;s>r;r++)e=t[r],e.save(),e.translate(Math.floor(this.position.x),Math.floor(this.position.y)),i=this.getRenderScale(),e.scale(i,i);for(n(),h=[],o=0,a=t.length;a>o;o++)e=t[o],h.push(e.restore());return h},t.prototype.clear=function(){var t,e;return e=this.shapes,t=[],this.setShapesInProgress([]),this.execute(new a.ClearAction(this,e,t)),this.trigger("clear",null),this.trigger("drawingChange",{})},t.prototype.execute=function(t){return this.undoStack.push(t),t["do"](),this.redoStack=[]},t.prototype.undo=function(){var t;return this.undoStack.length?(t=this.undoStack.pop(),t.undo(),this.redoStack.push(t),this.trigger("undo",{action:t}),this.trigger("drawingChange",{})):void 0},t.prototype.redo=function(){var t;return this.redoStack.length?(t=this.redoStack.pop(),this.undoStack.push(t),t["do"](),this.trigger("redo",{action:t}),this.trigger("drawingChange",{})):void 0},t.prototype.canUndo=function(){return!!this.undoStack.length},t.prototype.canRedo=function(){return!!this.redoStack.length},t.prototype.getPixel=function(t,e){var n,i;return n=this.drawingCoordsToClientCoords(t,e),i=this.ctx.getImageData(n.x,n.y,1,1).data,i[3]?"rgb("+i[0]+", "+i[1]+", "+i[2]+")":null},t.prototype.getContentBounds=function(){return m.getBoundingRect(this.shapes.concat(this.backgroundShapes).map(function(t){return t.getBoundingRect()}),this.width===i?0:this.width,this.height===i?0:this.height)},t.prototype.getImage=function(t){return null==t&&(t={}),null==t.includeWatermark&&(t.includeWatermark=!0),null==t.scaleDownRetina&&(t.scaleDownRetina=!0),null==t.scale&&(t.scale=1),t.scaleDownRetina||(t.scale*=this.backingScale),t.includeWatermark&&(t.watermarkImage=this.watermarkImage,t.watermarkScale=this.watermarkScale,t.scaleDownRetina||(t.watermarkScale*=this.backingScale)),d(this.getSnapshot(),t)},t.prototype.canvasForExport=function(){return this.repaintAllLayers(),m.combineCanvases(this.backgroundCanvas,this.canvas)},t.prototype.canvasWithBackground=function(t){return m.combineCanvases(t,this.canvasForExport())},t.prototype.getSnapshot=function(t){var e,n,i,r,o,s;for(null==t&&(t=null),null==t&&(t=["shapes","imageSize","colors","position","scale","backgroundShapes"]),i={},s=["colors","position","scale"],r=0,o=s.length;o>r;r++)e=s[r],x.call(t,e)>=0&&(i[e]=this[e]);return x.call(t,"shapes")>=0&&(i.shapes=function(){var t,e,i,r;for(i=this.shapes,r=[],t=0,e=i.length;e>t;t++)n=i[t],r.push(g(n));return r}.call(this)),x.call(t,"backgroundShapes")>=0&&(i.backgroundShapes=function(){var t,e,i,r;for(i=this.backgroundShapes,r=[],t=0,e=i.length;e>t;t++)n=i[t],r.push(g(n));return r}.call(this)),x.call(t,"imageSize")>=0&&(i.imageSize={width:this.width,height:this.height}),i},t.prototype.getSnapshotJSON=function(){return console.warn("lc.getSnapshotJSON() is deprecated. use JSON.stringify(lc.getSnapshot()) instead."),JSON.stringify(this.getSnapshot())},t.prototype.getSVGString=function(t){return null==t&&(t={}),f(this.getSnapshot(),t)},t.prototype.loadSnapshot=function(t){var e,n,i,o,s,h,c,u,l,p;if(t){if(t.colors)for(l=["primary","secondary","background"],s=0,c=l.length;c>s;s++)e=l[s],this.setColor(e,t.colors[e]);if(t.shapes)for(this.shapes=[],p=t.shapes,h=0,u=p.length;u>h;h++)o=p[h],i=r(o),i&&this.execute(new a.AddShapeAction(this,i));return t.backgroundShapes&&(this.backgroundShapes=function(){var e,i,o,s;for(o=t.backgroundShapes,s=[],e=0,i=o.length;i>e;e++)n=o[e],s.push(r(n));return s}()),t.imageSize&&(this.width=t.imageSize.width,this.height=t.imageSize.height),t.position&&(this.position=t.position),t.scale&&(this.scale=t.scale),this.repaintAllLayers(),this.trigger("snapshotLoad"),this.trigger("drawingChange",{})}},t.prototype.loadSnapshotJSON=function(t){return console.warn("lc.loadSnapshotJSON() is deprecated. use lc.loadSnapshot(JSON.parse(snapshot)) instead."),this.loadSnapshot(JSON.parse(t))},t}()},{"../tools/Pencil":23,"./actions":3,"./bindEvents":4,"./canvasRenderer":5,"./math":9,"./renderSnapshotToImage":10,"./renderSnapshotToSVG":11,"./shapes":12,"./svgRenderer":13,"./util":14}],2:[function(t,e,n){var i,r,o,s;t("./fontmetrics.js"),s=function(t){var e,n,i,r,o,s,a,h;for(n=t.split(" "),i=0,a=0,h=n.length;h>a;a++)r=n[a],o=parseInt(r.replace("px",""),10),isNaN(o)||(i=o);if(!i)throw"Font size not found";return s=t.substring(n[0].length+1).replace("bold ","").replace("italic ","").replace("underline ",""),e=s,{fontSize:i,fontFamily:e}},o=function(t,e,n){var i,r,o,s,a,h,c,u,l,p;if(!e.length)return["",""];for(r=0,h=0,c=0,p=!1;;)if(r+=1,o=r>=e.length,a=!o&&e[r].match(/\s/),s=a||o,l=e.substring(0,r),i=n?t.measureTextWidth(l).width<=n:!0,i&&(c=r),s&&p&&(p=!1,i&&(h=r)),p=!a,o||!i){if(i)return[e,""];if(h>0){for(u=h+1;u<e.length&&e[u].match("/s/");)u+=1;return[e.substring(0,h),e.substring(u)]}return[e.substring(0,c),e.substring(c)]}},r=function(t,e,n){var i,r,s,a,h,c,u,l,p;for(h=e.split(/\r\n|\r|\n/g),i=[],c=0,u=h.length;u>c;c++)if(a=h[c],l=o(t,a,n),r=l[0],s=l[1],r)for(;r;)i.push(r),p=o(t,s,n),r=p[0],s=p[1];else i.push(a);return i},i=function(){function t(t,e,n,i,o){var a,h,c;this.text=e,this.font=n,this.forcedWidth=i,this.forcedHeight=o,c=s(this.font),a=c.fontFamily,h=c.fontSize,t.font=this.font,t.textBaseline="baseline",this.emDashWidth=t.measureTextWidth("—",h,a).width,this.caratWidth=t.measureTextWidth("|",h,a).width,this.lines=r(t,e,this.forcedWidth),this.metricses=this.lines.map(function(e){return function(n){return t.measureText2(n||"X",h,e.font)}}(this)),this.metrics={ascent:Math.max.apply(Math,this.metricses.map(function(t){var e;return e=t.ascent})),descent:Math.max.apply(Math,this.metricses.map(function(t){var e;return e=t.descent})),fontsize:Math.max.apply(Math,this.metricses.map(function(t){var e;return e=t.fontsize})),leading:Math.max.apply(Math,this.metricses.map(function(t){var e;return e=t.leading})),width:Math.max.apply(Math,this.metricses.map(function(t){var e;return e=t.width})),height:Math.max.apply(Math,this.metricses.map(function(t){var e;return e=t.height})),bounds:{minx:Math.min.apply(Math,this.metricses.map(function(t){var e;return e=t.bounds,e.minx})),miny:Math.min.apply(Math,this.metricses.map(function(t){var e;return e=t.bounds,e.miny})),maxx:Math.max.apply(Math,this.metricses.map(function(t){var e;return e=t.bounds,e.maxx})),maxy:Math.max.apply(Math,this.metricses.map(function(t){var e;return e=t.bounds,e.maxy}))}},this.boundingBoxWidth=Math.ceil(this.metrics.width)}return t.prototype.draw=function(t,e,n){var i,r,o,s,a,h;for(t.textBaseline="top",t.font=this.font,i=0,a=this.lines,h=[],o=0,s=a.length;s>o;o++)r=a[o],t.fillText(r,e,n+i*this.metrics.leading),h.push(i+=1);return h},t.prototype.getWidth=function(t){return null==t&&(t=!1),this.forcedWidth?this.forcedWidth:t?this.metrics.bounds.maxx+this.caratWidth:this.metrics.bounds.maxx},t.prototype.getHeight=function(){return this.forcedHeight||this.metrics.leading*this.lines.length},t}(),e.exports=i},{"./fontmetrics.js":6}],3:[function(t,e,n){var i,r;r=function(){function t(t,e,n){this.lc=t,this.oldShapes=e,this.newShapes=n}return t.prototype["do"]=function(){return this.lc.shapes=this.newShapes,this.lc.repaintLayer("main")},t.prototype.undo=function(){return this.lc.shapes=this.oldShapes,this.lc.repaintLayer("main")},t}(),i=function(){function t(t,e,n){this.lc=t,this.shape=e,this.previousShapeId=null!=n?n:null}return t.prototype["do"]=function(){var t,e,n,i,r,o;if(this.lc.shapes.length&&this.lc.shapes[this.lc.shapes.length-1].id!==this.previousShapeId&&null!==this.previousShapeId){for(e=[],t=!1,o=this.lc.shapes,i=0,r=o.length;r>i;i++)n=o[i],e.push(n),n.id===this.previousShapeId&&(e.push(this.shape),t=!0);t||e.push(this.shape),this.lc.shapes=e}else this.lc.shapes.push(this.shape);return this.lc.repaintLayer("main")},t.prototype.undo=function(){var t,e,n,i,r;if(this.lc.shapes[this.lc.shapes.length-1].id===this.shape.id)this.lc.shapes.pop();else{for(t=[],r=this.lc.shapes,n=0,i=r.length;i>n;n++)e=r[n],e.id!==this.shape.id&&t.push(e);lc.shapes=t}return this.lc.repaintLayer("main")},t}(),e.exports={ClearAction:r,AddShapeAction:i}},{}],4:[function(t,e,n){var i,r,o,s;o=function(t,e){var n,i,r;return i=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY,n=t.getBoundingClientRect(),[i-n.left,r-n.top]},s=function(t,e){var n;return n=t.getBoundingClientRect(),{left:e.clientX-n.left,top:e.clientY-n.top}},r=function(t){return null!=t.buttons?1===t.buttons:t.which>0},e.exports=i=function(t,e,n){var i,r,a,h,c,u;return null==n&&(n=!1),u=[],r=function(n){return function(n){var i;return n.preventDefault(),i=s(e,n),t.pointerMove(i.left,i.top)}}(this),a=function(n){return function(n){var i;return n.preventDefault(),e.onselectstart=function(){return!0},i=s(e,n),t.pointerUp(i.left,i.top),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",a),e.addEventListener("mousemove",r)}}(this),e.addEventListener("mousedown",function(n){return function(n){var i,o;return"canvas"===n.target.tagName.toLowerCase()?(i=!0,n.preventDefault(),e.onselectstart=function(){return!1},o=s(e,n),t.pointerDown(o.left,o.top),e.removeEventListener("mousemove",r),document.addEventListener("mousemove",r),document.addEventListener("mouseup",a)):void 0}}(this)),c=function(n){return n.preventDefault(),t.pointerMove.apply(t,o(e,n))},h=function(n){return n.preventDefault(),t.pointerUp.apply(t,o(e,n)),document.removeEventListener("touchmove",c),document.removeEventListener("touchend",h),document.removeEventListener("touchcancel",h)},e.addEventListener("touchstart",function(n){return"canvas"===n.target.tagName.toLowerCase()?(n.preventDefault(),1===n.touches.length?(t.pointerDown.apply(t,o(e,n)),document.addEventListener("touchmove",c),document.addEventListener("touchend",h),document.addEventListener("touchcancel",h)):t.pointerMove.apply(t,o(e,n))):void 0}),n&&(console.warn("Keyboard panning is deprecated."),i=function(e){switch(e.keyCode){case 37:t.pan(-10,0);break;case 38:t.pan(0,-10);break;case 39:t.pan(10,0);break;case 40:t.pan(0,10)}return t.repaintAllLayers()},document.addEventListener("keydown",i),u.push(function(){return document.removeEventListener(i)})),function(){var t,e,n,i;for(i=[],e=0,n=u.length;n>e;e++)t=u[e],i.push(t());return i}}},{}],5:[function(t,e,n){var i,r,o,s,a,h,c,u,l,p,d;h=t("./lineEndCapShapes.coffee"),p={},i=function(t,e,n){return p[t]={drawFunc:e,drawLatestFunc:n}},c=function(){},l=function(t,e,n){var i;if(null==n&&(n={}),null==n.shouldIgnoreUnsupportedShapes&&(n.shouldIgnoreUnsupportedShapes=!1),null==n.retryCallback&&(n.retryCallback=c),null==n.shouldOnlyDrawLatest&&(n.shouldOnlyDrawLatest=!1),null==n.bufferCtx&&(n.bufferCtx=null),i=n.bufferCtx,p[e.className])return n.shouldOnlyDrawLatest&&p[e.className].drawLatestFunc?p[e.className].drawLatestFunc(t,i,e,n.retryCallback):p[e.className].drawFunc(t,e,n.retryCallback);if(n.shouldIgnoreUnsupportedShapes)return console.warn("Can't render shape of type "+e.className+" to canvas");throw"Can't render shape of type "+e.className+" to canvas"},u=function(t,e,n){return l(t.getContext("2d"),e,n)},i("Rectangle",function(t,e){var n,i;return n=e.x,i=e.y,e.strokeWidth%2!==0&&(n+=.5,i+=.5),t.fillStyle=e.fillColor,t.fillRect(n,i,e.width,e.height),t.lineWidth=e.strokeWidth,t.strokeStyle=e.strokeColor,t.strokeRect(n,i,e.width,e.height)}),i("Ellipse",function(t,e){var n,i,r,o;return t.save(),o=Math.floor(e.width/2),r=Math.floor(e.height/2),n=e.x+o,i=e.y+r,t.translate(n,i),t.scale(1,Math.abs(e.height/e.width)),t.beginPath(),t.arc(0,0,Math.abs(o),0,2*Math.PI),t.closePath(),t.restore(),t.fillStyle=e.fillColor,t.fill(),t.lineWidth=e.strokeWidth,t.strokeStyle=e.strokeColor,t.stroke()}),i("SelectionBox",function(){var t;return t=function(t,e,n){var i,r;return i=e.x,r=e.y,0!==n?(t.fillStyle="#fff",t.fillRect(i,r,n,n),t.strokeStyle="#000",t.strokeRect(i,r,n,n)):void 0},function(e,n){return t(e,n.getTopLeftHandleRect(),n.handleSize),t(e,n.getTopRightHandleRect(),n.handleSize),t(e,n.getBottomLeftHandleRect(),n.handleSize),t(e,n.getBottomRightHandleRect(),n.handleSize),n.backgroundColor&&(e.fillStyle=n.backgroundColor,e.fillRect(n._br.x-n.margin,n._br.y-n.margin,n._br.width+2*n.margin,n._br.height+2*n.margin)),e.lineWidth=1,e.strokeStyle="#000",e.setLineDash([2,4]),e.strokeRect(n._br.x-n.margin,n._br.y-n.margin,n._br.width+2*n.margin,n._br.height+2*n.margin),e.setLineDash([])}}()),i("Image",function(t,e,n){return e.image.width?1===e.scale?t.drawImage(e.image,e.x,e.y):t.drawImage(e.image,e.x,e.y,e.image.width*e.scale,e.image.height*e.scale):n?e.image.onload=n:void 0}),i("Line",function(t,e){var n,i,r,o,s;return e.x1!==e.x2||e.y1!==e.y2?(i=e.x1,r=e.x2,o=e.y1,s=e.y2,e.strokeWidth%2!==0&&(i+=.5,r+=.5,o+=.5,s+=.5),t.lineWidth=e.strokeWidth,t.strokeStyle=e.color,t.lineCap=e.capStyle,e.dash&&t.setLineDash(e.dash),t.beginPath(),t.moveTo(i,o),t.lineTo(r,s),t.stroke(),e.dash&&t.setLineDash([]),n=Math.max(2.2*e.strokeWidth,5),e.endCapShapes[0]&&h[e.endCapShapes[0]].drawToCanvas(t,i,o,Math.atan2(o-s,i-r),n,e.color),e.endCapShapes[1]?h[e.endCapShapes[1]].drawToCanvas(t,r,s,Math.atan2(s-o,r-i),n,e.color):void 0):void 0}),d=function(t,e,n,i){var r,o,s,a;if(null==n&&(n=!1),null==i&&(i="round"),e.length){for(t.lineCap=i,t.strokeStyle=e[0].color,t.lineWidth=e[0].size,t.beginPath(),e[0].size%2===0?t.moveTo(e[0].x,e[0].y):t.moveTo(e[0].x+.5,e[0].y+.5),a=e.slice(1),o=0,s=a.length;s>o;o++)r=a[o],e[0].size%2===0?t.lineTo(r.x,r.y):t.lineTo(r.x+.5,r.y+.5);return n?t.closePath():void 0}},s=function(t,e){return d(t,e.smoothedPoints),t.stroke()},a=function(t,e,n){var i,r,o;return n.tail?(o=n.smoothedPoints.length-n.segmentSize*n.tailSize,r=o<2*n.segmentSize?0:o,i=o+n.segmentSize+1,d(e,n.smoothedPoints.slice(r,i)),e.stroke()):(d(e,n.smoothedPoints),e.stroke())},i("LinePath",s,a),r=function(t,e){return t.save(),t.globalCompositeOperation="destination-out",s(t,e),t.restore()},o=function(t,e,n){return t.save(),t.globalCompositeOperation="destination-out",e.save(),e.globalCompositeOperation="destination-out",a(t,e,n),t.restore(),e.restore()},i("ErasedLinePath",r,o),i("Text",function(t,e){return e.renderer||e._makeRenderer(t),t.fillStyle=e.color,e.renderer.draw(t,e.x,e.y)}),i("Polygon",function(t,e){return t.fillStyle=e.fillColor,d(t,e.points,e.isClosed,"butt"),t.fill(),t.stroke()}),e.exports={defineCanvasRenderer:i,renderShapeToCanvas:u,renderShapeToContext:l}},{"./lineEndCapShapes.coffee":7}],6:[function(t,e,n){!function(){if(!document.defaultView.getComputedStyle)throw"ERROR: 'document.defaultView.getComputedStyle' not found. This library only works in browsers that can report computed CSS values.";CanvasRenderingContext2D.prototype.measureTextWidth=CanvasRenderingContext2D.prototype.measureText;var t=function(t,e){return document.defaultView.getComputedStyle(t,null).getPropertyValue(e)};CanvasRenderingContext2D.prototype.measureText2=function(e,n,i){var r=this.measureTextWidth(e),o=!/\S/.test(e);r.fontsize=n;var s=document.createElement("div");s.style.position="absolute",s.style.opacity=0,s.style.font=i,s.innerHTML=e+"<br/>"+e,document.body.appendChild(s),r.leading=1.2*n;var a=t(s,"height");if(a=a.replace("px",""),a>=2*n&&(r.leading=a/2|0),document.body.removeChild(s),o)r.ascent=0,r.descent=0,r.bounds={minx:0,maxx:r.width,miny:0,maxy:0},r.height=0;else{var h=document.createElement("canvas"),c=100;h.width=r.width+c,h.height=3*n,h.style.opacity=1,h.style.font=i;var u=h.getContext("2d");u.font=i;var l=h.width,p=h.height,d=p/2;u.fillStyle="white",u.fillRect(-1,-1,l+2,p+2),u.fillStyle="black",u.fillText(e,c/2,d);for(var f=u.getImageData(0,0,l,p).data,g=0,m=4*l,y=f.length;++g<y&&255===f[g];);var S=g/m|0;for(g=y-1;--g>0&&255===f[g];);var v=g/m|0;for(g=0;y>g&&255===f[g];)g+=m,g>=y&&(g=g-y+4);var x=g%m/4|0,w=1;for(g=y-3;g>=0&&255===f[g];)g-=m,0>g&&(g=y-3-4*w++);var b=g%m/4+1|0;r.ascent=d-S,r.descent=v-d,r.bounds={minx:x-c/2,maxx:b-c/2,miny:0,maxy:v-S},r.height=1+(v-S)}return r}}()},{}],7:[function(t,e,n){e.exports={arrow:function(){var t;return t=function(t,e,n,i,r){return[{x:t+Math.cos(n+Math.PI/2)*i/2,y:e+Math.sin(n+Math.PI/2)*i/2},{x:t+Math.cos(n)*r,y:e+Math.sin(n)*r},{x:t+Math.cos(n-Math.PI/2)*i/2,y:e+Math.sin(n-Math.PI/2)*i/2}]},{drawToCanvas:function(e,n,i,r,o,s,a){var h;return null==a&&(a=0),a=a||o,e.fillStyle=s,e.lineWidth=0,e.strokeStyle="transparent",e.beginPath(),h=t(n,i,r,o,a),e.moveTo(h[0].x,h[0].y),e.lineTo(h[1].x,h[1].y),e.lineTo(h[2].x,h[2].y),e.fill()},svg:function(e,n,i,r,o,s){var a;return null==s&&(s=0),s=s||r,a=t(e,n,i,r,s),"<polygon fill='"+o+"' stroke='none' points='"+a.map(function(t){return""+t.x+","+t.y})+"' />"}}}()}},{}],8:[function(t,e,n){var i,r,o;r={},i=function(t){return r=t},o=function(t){var e;return e=r[t],e||t},e.exports={localize:i,_:o}},{}],9:[function(t,e,n){var i,r,o,s,a,h;i=t("./shapes").Point,a=t("./util"),r={},r.toPoly=function(t){var e,n,i,r,s,a,c;for(r=[],s=[],e=0,a=0,c=t.length;c>a;a++)i=t[a],n=o(i,h(t,e)),r=r.concat([n[0]]),s=[n[1]].concat(s),e+=1;return r.concat(s)},h=function(t,e){var n;return t.length<3&&(n={x:0,y:0}),n=0===e?h(t,e+1):e===t.length-1?h(t,e-1):r.diff(t[e-1],t[e+1])},r.diff=function(t,e){return{x:e.x-t.x,y:e.y-t.y}},s=function(t){var e;return e=r.len(t),{x:t.x/e,y:t.y/e}},o=function(t,e){return e=s(e),e.x=e.x*t.size/2,e.y=e.y*t.size/2,[{x:t.x-e.y,y:t.y+e.x,color:t.color},{x:t.x+e.y,y:t.y-e.x,color:t.color}]},r.len=function(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))},r.scalePositionScalar=function(t,e,n,i){var r,o;return o=e*n,r=e*i,t+(o-r)/2},e.exports=r},{"./shapes":12,"./util":14}],10:[function(t,e,n){var i,r,o,s;s=t("./util"),r=t("./shapes").JSONToShape,i="infinite",o=function(t,e,n){return e.width?(t.save(),t.translate(t.canvas.width/2,t.canvas.height/2),t.scale(n,n),t.drawImage(e,-e.width/2,-e.height/2),t.restore()):void 0},e.exports=function(t,e){var n,a,h,c,u,l,p,d,f,g;return null==e&&(e={}),null==e.scale&&(e.scale=1),p=function(){var e,n,i,o;for(i=t.shapes,o=[],e=0,n=i.length;n>e;e++)l=i[e],o.push(r(l));return o}(),a=[],t.backgroundShapes&&(a=function(){var e,n,i,o;for(i=t.backgroundShapes,o=[],e=0,n=i.length;n>e;e++)l=i[e],o.push(r(l));return o}()),u=t.imageSize||{width:i,height:i},g=u.width,c=u.height,h=t.colors||{background:"transparent"},n=p.concat(a),d=document.createElement("canvas"),f=d.getContext("2d"),null==e.margin&&(e.margin={top:0,right:0,bottom:0,left:0}),e.rect||(e.rect=s.getBoundingRect(function(){var t,e,i;for(i=[],t=0,e=n.length;e>t;t++)l=n[t],i.push(l.getBoundingRect(f));return i}(),g===i?0:g,c===i?0:c)),e.rect.x-=e.margin.left,e.rect.y-=e.margin.top,e.rect.width+=e.margin.left+e.margin.right,e.rect.height+=e.margin.top+e.margin.bottom,d.width=e.rect.width*e.scale,d.height=e.rect.height*e.scale,f.fillStyle=h.background,f.fillRect(0,0,d.width,d.height),e.rect.width&&e.rect.height?(e.watermarkImage&&o(f,e.watermarkImage,e.watermarkScale),s.combineCanvases(d,s.renderShapes(a,e.rect,e.scale),s.renderShapes(p,e.rect,e.scale))):null}},{"./shapes":12,"./util":14}],11:[function(t,e,n){var i,r,o;o=t("./util"),r=t("./shapes").JSONToShape,i="infinite",e.exports=function(t,e){var n,s,a,h,c,u,l,p,d,f;return null==e&&(e={}),d=function(){var e,n,i,o;for(i=t.shapes,o=[],e=0,n=i.length;n>e;e++)p=i[e],o.push(r(p));return o}(),s=[],t.backgroundShapes&&(s=function(){var e,n,i,o;for(i=t.backgroundShapes,o=[],e=0,n=i.length;n>e;e++)p=i[e],
o.push(r(p));return o}()),l=t.imageSize||{width:i,height:i},f=l.width,u=l.height,a=t.colors||{background:"transparent"},n=d.concat(s),c=document.createElement("canvas"),h=c.getContext("2d"),null==e.margin&&(e.margin={top:0,right:0,bottom:0,left:0}),e.rect||(e.rect=o.getBoundingRect(function(){var t,e,i;for(i=[],t=0,e=n.length;e>t;t++)p=n[t],i.push(p.getBoundingRect(h));return i}(),f===i?0:f,u===i?0:u)),e.rect.x-=e.margin.left,e.rect.y-=e.margin.top,e.rect.width+=e.margin.left+e.margin.right,e.rect.height+=e.margin.top+e.margin.bottom,LC.renderShapesToSVG(s.concat(d),e.rect,a.background)}},{"./shapes":12,"./util":14}],12:[function(t,e,n){var i,r,o,s,a,h,c,u,l,p,d,f,g,m,y,S,v,x,w,b,C,k;y=t("./util"),o=t("./TextRenderer"),l=t("./lineEndCapShapes.coffee"),b=t("./canvasRenderer"),h=b.defineCanvasRenderer,d=b.renderShapeToContext,C=t("./svgRenderer"),c=C.defineSVGRenderer,f=C.renderShapeToSVG,m={},u=function(t,e){var n,i,r,o,s,a,u,l;n=function(t,n,i,r,o,s,a,h,c,u,l,p,d,f,g,m){return e.constructor.call(this,t,n,i,r,o,s,a,h,c,u,l,p,d,f,g,m),this},n.prototype.className=t,n.fromJSON=e.fromJSON,e.draw&&(s=e.draw,a=e.draw||function(t,e,n){return this.draw(t,e,n)},i=function(t,e,n){return s.call(e,t,n)},r=function(t,e,n,i){return a.call(n,t,e,i)},delete e.draw,e.drawLatest&&delete e.drawLatest,h(t,i,r)),e.toSVG&&(u=e.toSVG,l=function(t){return u.call(t)},delete e.toSVG,c(t,l)),n.prototype.draw=function(t,e){return d(t,this,{retryCallback:e})},n.prototype.drawLatest=function(t,e,n){return d(t,this,{retryCallback:n,bufferCtx:e,shouldOnlyDrawLatest:!0})},n.prototype.toSVG=function(){return f(this)};for(o in e)"fromJSON"!==o&&(n.prototype[o]=e[o]);return m[t]=n,n},a=function(t,e,n,i,r,o,s,a,h,c,u,l,p,d,f,g,S){var v;return v=new m[t](e,n,i,r,o,s,a,h,c,u,l,p,d,f,g,S),v.id=y.getGUID(),v},i=function(t){var e,n,i,r;return e=t.className,n=t.data,i=t.id,e in m?(r=m[e].fromJSON(n),r?(i&&(r.id=i),r):(console.log("Unreadable shape:",e,n),null)):(console.log("Unknown shape:",e,n),null)},g=function(t){return{className:t.className,data:t.toJSON(),id:t.id}},s=function(t,e){return e?s(x(x(k(t))),e-1):t},k=function(t){var e,n,i,r,o;for(t=[t[0]].concat(t).concat(y.last(t)),i=[],e=0,r=0,o=t.length;o>r;r++)n=t[r],i[2*e]=n,t[e+1]&&(i[2*e+1]=w(n,t[e+1])),e+=1;return i},x=function(t){var e,n,i,r,o;for(e=[],n=0,r=0,o=t.length;o>r;r++)i=t[r],t[n+1]&&(e[n]=w(i,t[n+1])),n+=1;return e},w=function(t,e){return a("Point",{x:t.x+(e.x-t.x)/2,y:t.y+(e.y-t.y)/2,size:t.size+(e.size-t.size)/2,color:t.color})},u("Image",{constructor:function(t){return null==t&&(t={}),this.x=t.x||0,this.y=t.y||0,this.scale=t.scale||1,this.image=t.image||null},getBoundingRect:function(){return{x:this.x,y:this.y,width:this.image.width,height:this.image.height,scale:this.scale}},toJSON:function(){return{x:this.x,y:this.y,imageSrc:this.image.src,imageObject:this.image,scale:this.scale}},fromJSON:function(t){var e,n;return e=null,(null!=(n=t.imageObject)?n.width:void 0)?e=t.imageObject:(e=new Image,e.src=t.imageSrc),a("Image",{x:t.x,y:t.y,image:e,scale:t.scale})},move:function(t){return null==t&&(t={}),this.x=this.x-t.xDiff,this.y=this.y-t.yDiff},setUpperLeft:function(t){return null==t&&(t={}),this.x=t.x,this.y=t.y}}),u("Rectangle",{constructor:function(t){return null==t&&(t={}),this.x=t.x||0,this.y=t.y||0,this.width=t.width||0,this.height=t.height||0,this.strokeWidth=t.strokeWidth||1,this.strokeColor=t.strokeColor||"black",this.fillColor=t.fillColor||"transparent"},getBoundingRect:function(){return{x:this.x-this.strokeWidth/2,y:this.y-this.strokeWidth/2,width:this.width+this.strokeWidth,height:this.height+this.strokeWidth}},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height,strokeWidth:this.strokeWidth,strokeColor:this.strokeColor,fillColor:this.fillColor}},fromJSON:function(t){return a("Rectangle",t)},move:function(t){return null==t&&(t={}),this.x=this.x-t.xDiff,this.y=this.y-t.yDiff},setUpperLeft:function(t){return null==t&&(t={}),this.x=t.x,this.y=t.y}}),u("Ellipse",{constructor:function(t){return null==t&&(t={}),this.x=t.x||0,this.y=t.y||0,this.width=t.width||0,this.height=t.height||0,this.strokeWidth=t.strokeWidth||1,this.strokeColor=t.strokeColor||"black",this.fillColor=t.fillColor||"transparent"},getBoundingRect:function(){return{x:this.x-this.strokeWidth/2,y:this.y-this.strokeWidth/2,width:this.width+this.strokeWidth,height:this.height+this.strokeWidth}},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height,strokeWidth:this.strokeWidth,strokeColor:this.strokeColor,fillColor:this.fillColor}},fromJSON:function(t){return a("Ellipse",t)},move:function(t){return null==t&&(t={}),this.x=this.x-t.xDiff,this.y=this.y-t.yDiff},setUpperLeft:function(t){return null==t&&(t={}),this.x=t.x,this.y=t.y}}),u("Line",{constructor:function(t){return null==t&&(t={}),this.x1=t.x1||0,this.y1=t.y1||0,this.x2=t.x2||0,this.y2=t.y2||0,this.strokeWidth=t.strokeWidth||1,this.color=t.color||"black",this.capStyle=t.capStyle||"round",this.endCapShapes=t.endCapShapes||[null,null],this.dash=t.dash||null},getBoundingRect:function(){return{x:Math.min(this.x1,this.x2)-this.strokeWidth/2,y:Math.min(this.y1,this.y2)-this.strokeWidth/2,width:Math.abs(this.x2-this.x1)+this.strokeWidth/2,height:Math.abs(this.y2-this.y1)+this.strokeWidth/2}},toJSON:function(){return{x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2,strokeWidth:this.strokeWidth,color:this.color,capStyle:this.capStyle,dash:this.dash,endCapShapes:this.endCapShapes}},fromJSON:function(t){return a("Line",t)},move:function(t){return null==t&&(t={}),this.x1=this.x1-t.xDiff,this.y1=this.y1-t.yDiff,this.x2=this.x2-t.xDiff,this.y2=this.y2-t.yDiff},setUpperLeft:function(t){var e,n,i;return null==t&&(t={}),e=this.getBoundingRect(),n=e.x-t.x,i=e.y-t.y,this.move({xDiff:n,yDiff:i})}}),v=function(t){var e,n,i,r,o;if(!t.length)return!1;for(i=t[0].size,e=t[0].color,r=0,o=t.length;o>r;r++)if(n=t[r],(n.size!==i||n.color!==e)&&console.log(i,e,n.size,n.color),n.size!==i||n.color!==e)return!1;return!0},S=function(t,e){var n,r,o,s,h;return r=null,e.points?r=function(){var t,r,o,s;for(o=e.points,s=[],t=0,r=o.length;r>t;t++)n=o[t],s.push(i(n));return s}():e.pointCoordinatePairs&&(r=function(){var t,n,r,o,a;for(r=e.pointCoordinatePairs,a=[],t=0,n=r.length;n>t;t++)o=r[t],s=o[0],h=o[1],a.push(i({className:"Point",data:{x:s,y:h,size:e.pointSize,color:e.pointColor,smooth:e.smooth}}));return a}()),o=null,e.smoothedPointCoordinatePairs&&(o=function(){var t,n,r,o,a;for(r=e.smoothedPointCoordinatePairs,a=[],t=0,n=r.length;n>t;t++)o=r[t],s=o[0],h=o[1],a.push(i({className:"Point",data:{x:s,y:h,size:e.pointSize,color:e.pointColor,smooth:e.smooth}}));return a}()),r[0]?a(t,{points:r,smoothedPoints:o,order:e.order,tailSize:e.tailSize,smooth:e.smooth}):null},p={constructor:function(t){var e,n,i,r,o;if(null==t&&(t={}),n=t.points||[],this.order=t.order||3,this.tailSize=t.tailSize||3,this.smooth="smooth"in t?t.smooth:!0,this.segmentSize=Math.pow(2,this.order),this.sampleSize=this.tailSize+1,t.smoothedPoints)return this.points=t.points,this.smoothedPoints=t.smoothedPoints;for(this.points=[],o=[],i=0,r=n.length;r>i;i++)e=n[i],o.push(this.addPoint(e));return o},getBoundingRect:function(){return y.getBoundingRect(this.points.map(function(t){return{x:t.x-t.size/2,y:t.y-t.size/2,width:t.size,height:t.size}}))},toJSON:function(){var t,e;return v(this.points)?{order:this.order,tailSize:this.tailSize,smooth:this.smooth,pointCoordinatePairs:function(){var t,n,i,r;for(i=this.points,r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push([e.x,e.y]);return r}.call(this),smoothedPointCoordinatePairs:function(){var t,n,i,r;for(i=this.smoothedPoints,r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push([e.x,e.y]);return r}.call(this),pointSize:this.points[0].size,pointColor:this.points[0].color}:{order:this.order,tailSize:this.tailSize,smooth:this.smooth,points:function(){var e,n,i,r;for(i=this.points,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(g(t));return r}.call(this)}},fromJSON:function(t){return S("LinePath",t)},addPoint:function(t){return this.points.push(t),this.smooth?!this.smoothedPoints||this.points.length<this.sampleSize?this.smoothedPoints=s(this.points,this.order):(this.tail=y.last(s(y.last(this.points,this.sampleSize),this.order),this.segmentSize*this.tailSize),this.smoothedPoints=this.smoothedPoints.slice(0,this.smoothedPoints.length-this.segmentSize*(this.tailSize-1)).concat(this.tail)):void(this.smoothedPoints=this.points)},move:function(t){var e,n,i,r;for(null==t&&(t={}),n=this.smooth?this.smoothedPoints:this.points,i=0,r=n.length;r>i;i++)e=n[i],e.move(t);return this.points=this.smoothedPoints},setUpperLeft:function(t){var e,n,i;return null==t&&(t={}),e=this.getBoundingRect(),n=e.x-t.x,i=e.y-t.y,this.move({xDiff:n,yDiff:i})}},r=u("LinePath",p),u("ErasedLinePath",{constructor:p.constructor,toJSON:p.toJSON,addPoint:p.addPoint,getBoundingRect:p.getBoundingRect,fromJSON:function(t){return S("ErasedLinePath",t)}}),u("Point",{constructor:function(t){return null==t&&(t={}),this.x=t.x||0,this.y=t.y||0,this.size=t.size||0,this.color=t.color||""},getBoundingRect:function(){return{x:this.x-this.size/2,y:this.y-this.size/2,width:this.size,height:this.size}},toJSON:function(){return{x:this.x,y:this.y,size:this.size,color:this.color}},fromJSON:function(t){return a("Point",t)},move:function(t){return null==t&&(t={}),this.x=this.x-t.xDiff,this.y=this.y-t.yDiff},setUpperLeft:function(t){return null==t&&(t={}),this.x=t.x,this.y=t.y}}),u("Polygon",{constructor:function(t){var e,n,i,r,o;for(null==t&&(t={}),this.points=t.points,this.fillColor=t.fillColor||"white",this.strokeColor=t.strokeColor||"black",this.strokeWidth=t.strokeWidth,this.dash=t.dash||null,null==t.isClosed&&(t.isClosed=!0),this.isClosed=t.isClosed,r=this.points,o=[],n=0,i=r.length;i>n;n++)e=r[n],e.color=this.strokeColor,o.push(e.size=this.strokeWidth);return o},addPoint:function(t,e){return this.points.push(LC.createShape("Point",{x:t,y:e}))},getBoundingRect:function(){return y.getBoundingRect(this.points.map(function(t){return t.getBoundingRect()}))},toJSON:function(){return{strokeWidth:this.strokeWidth,fillColor:this.fillColor,strokeColor:this.strokeColor,dash:this.dash,isClosed:this.isClosed,pointCoordinatePairs:this.points.map(function(t){return[t.x,t.y]})}},fromJSON:function(t){return t.points=t.pointCoordinatePairs.map(function(e){var n,i;return n=e[0],i=e[1],a("Point",{x:n,y:i,size:t.strokeWidth,color:t.strokeColor})}),a("Polygon",t)},move:function(t){var e,n,i,r,o;for(null==t&&(t={}),r=this.points,o=[],n=0,i=r.length;i>n;n++)e=r[n],o.push(e.move(t));return o},setUpperLeft:function(t){var e,n,i;return null==t&&(t={}),e=this.getBoundingRect(),n=e.x-t.x,i=e.y-t.y,this.move({xDiff:n,yDiff:i})}}),u("Text",{constructor:function(t){return null==t&&(t={}),this.x=t.x||0,this.y=t.y||0,this.v=t.v||0,this.text=t.text||"",this.color=t.color||"black",this.font=t.font||"18px sans-serif",this.forcedWidth=t.forcedWidth||null,this.forcedHeight=t.forcedHeight||null},_makeRenderer:function(t){return t.lineHeight=1.2,this.renderer=new o(t,this.text,this.font,this.forcedWidth,this.forcedHeight),this.v<1?(console.log("repairing baseline"),this.v=1,this.x-=this.renderer.metrics.bounds.minx,this.y-=this.renderer.metrics.leading-this.renderer.metrics.descent):void 0},setText:function(t){return this.text=t,this.renderer=null},setFont:function(t){return this.font=t,this.renderer=null},setPosition:function(t,e){return this.x=t,this.y=e},setSize:function(t,e){return this.forcedWidth=Math.max(t,0),this.forcedHeight=Math.max(e,0),this.renderer=null},enforceMaxBoundingRect:function(t){var e,n,i;return e=this.getBoundingRect(t.ctx),i={x:-t.position.x/t.scale,y:-t.position.y/t.scale,width:t.canvas.width/t.scale,height:t.canvas.height/t.scale},e.x+e.width>i.x+i.width?(n=e.x-i.x,this.forcedWidth=i.width-n-10,this.renderer=null):void 0},getBoundingRect:function(t,e){if(null==e&&(e=!1),!this.renderer){if(!t)throw"Must pass ctx if text hasn't been rendered yet";this._makeRenderer(t)}return{x:Math.floor(this.x),y:Math.floor(this.y),width:Math.ceil(this.renderer.getWidth(!0)),height:Math.ceil(this.renderer.getHeight())}},toJSON:function(){return{x:this.x,y:this.y,text:this.text,color:this.color,font:this.font,forcedWidth:this.forcedWidth,forcedHeight:this.forcedHeight,v:this.v}},fromJSON:function(t){return a("Text",t)},move:function(t){return null==t&&(t={}),this.x=this.x-t.xDiff,this.y=this.y-t.yDiff},setUpperLeft:function(t){return null==t&&(t={}),this.x=t.x,this.y=t.y}}),u("SelectionBox",{constructor:function(t){return null==t&&(t={}),this.shape=t.shape,null!=t.handleSize?this.handleSize=t.handleSize:this.handleSize=10,this.margin=4,this.backgroundColor=t.backgroundColor||null,this._br=this.shape.getBoundingRect(t.ctx)},toJSON:function(){return{shape:g(this.shape),backgroundColor:this.backgroundColor}},fromJSON:function(t){var e,n,r,o;return o=t.shape,n=t.handleSize,r=t.margin,e=t.backgroundColor,a("SelectionBox",{shape:i(o),backgroundColor:e})},getTopLeftHandleRect:function(){return{x:this._br.x-this.handleSize-this.margin,y:this._br.y-this.handleSize-this.margin,width:this.handleSize,height:this.handleSize}},getBottomLeftHandleRect:function(){return{x:this._br.x-this.handleSize-this.margin,y:this._br.y+this._br.height+this.margin,width:this.handleSize,height:this.handleSize}},getTopRightHandleRect:function(){return{x:this._br.x+this._br.width+this.margin,y:this._br.y-this.handleSize-this.margin,width:this.handleSize,height:this.handleSize}},getBottomRightHandleRect:function(){return{x:this._br.x+this._br.width+this.margin,y:this._br.y+this._br.height+this.margin,width:this.handleSize,height:this.handleSize}},getBoundingRect:function(){return{x:this._br.x-this.margin,y:this._br.y-this.margin,width:this._br.width+2*this.margin,height:this._br.height+2*this.margin}}}),e.exports={defineShape:u,createShape:a,JSONToShape:i,shapeToJSON:g}},{"./TextRenderer":2,"./canvasRenderer":5,"./lineEndCapShapes.coffee":7,"./svgRenderer":13,"./util":14}],13:[function(t,e,n){var i,r,o,s;r=t("./lineEndCapShapes.coffee"),s={},i=function(t,e){return s[t]=e},o=function(t,e){if(null==e&&(e={}),null==e.shouldIgnoreUnsupportedShapes&&(e.shouldIgnoreUnsupportedShapes=!1),s[t.className])return s[t.className](t);if(e.shouldIgnoreUnsupportedShapes)return console.warn("Can't render shape of type "+t.className+" to SVG"),"";throw"Can't render shape of type "+t.className+" to SVG"},i("Rectangle",function(t){var e,n,i,r,o,s,a,h;return r=t.x,a=t.y,o=t.x+t.width,h=t.y+t.height,i=Math.min(r,o),s=Math.min(a,h),n=Math.max(r,o)-i,e=Math.max(a,h)-s,t.strokeWidth%2!==0&&(i+=.5,s+=.5),"<rect x='"+i+"' y='"+s+"' width='"+n+"' height='"+e+"' stroke='"+t.strokeColor+"' fill='"+t.fillColor+"' stroke-width='"+t.strokeWidth+"' />"}),i("SelectionBox",function(t){return""}),i("Ellipse",function(t){var e,n,i,r;return r=Math.floor(t.width/2),i=Math.floor(t.height/2),e=t.x+r,n=t.y+i,"<ellipse cx='"+e+"' cy='"+n+"' rx='"+Math.abs(r)+"' ry='"+Math.abs(i)+"' stroke='"+t.strokeColor+"' fill='"+t.fillColor+"' stroke-width='"+t.strokeWidth+"' />"}),i("Image",function(t){return"<image x='"+t.x+"' y='"+t.y+"' width='"+t.image.naturalWidth*t.scale+"' height='"+t.image.naturalHeight*t.scale+"' xlink:href='"+t.image.src+"' />"}),i("Line",function(t){var e,n,i,o,s,a,h;return i=t.dash?"stroke-dasharray='"+t.dash.join(", ")+"'":"",n="",e=Math.max(2.2*t.strokeWidth,5),o=t.x1,s=t.x2,a=t.y1,h=t.y2,t.strokeWidth%2!==0&&(o+=.5,s+=.5,a+=.5,h+=.5),t.endCapShapes[0]&&(n+=r[t.endCapShapes[0]].svg(o,a,Math.atan2(a-h,o-s),e,t.color)),t.endCapShapes[1]&&(n+=r[t.endCapShapes[1]].svg(s,h,Math.atan2(h-a,s-o),e,t.color)),"<g> <line x1='"+o+"' y1='"+a+"' x2='"+s+"' y2='"+h+"' "+i+" stroke-linecap='"+t.capStyle+"' stroke='"+t.color+" 'stroke-width='"+t.strokeWidth+"' /> "+n+" </g>"}),i("LinePath",function(t){return"<polyline fill='none' points='"+t.smoothedPoints.map(function(t){var e;return e=t.strokeWidth%2===0?0:.5,""+(t.x+e)+","+(t.y+e)}).join(" ")+"' stroke='"+t.points[0].color+"' stroke-linecap='round' stroke-width='"+t.points[0].size+"' />"}),i("ErasedLinePath",function(t){return""}),i("Polygon",function(t){return t.isClosed?"<polygon fill='"+t.fillColor+"' points='"+t.points.map(function(t){var e;return e=t.strokeWidth%2===0?0:.5,""+(t.x+e)+","+(t.y+e)}).join(" ")+"' stroke='"+t.strokeColor+"' stroke-width='"+t.strokeWidth+"' />":"<polyline fill='"+t.fillColor+"' points='"+t.points.map(function(t){var e;return e=t.strokeWidth%2===0?0:.5,""+(t.x+e)+","+(t.y+e)}).join(" ")+"' stroke='none' /> <polyline fill='none' points='"+t.points.map(function(t){var e;return e=t.strokeWidth%2===0?0:.5,""+(t.x+e)+","+(t.y+e)}).join(" ")+"' stroke='"+t.strokeColor+"' stroke-width='"+t.strokeWidth+"' />"}),i("Text",function(t){var e,n,i;return i=t.forcedWidth?"width='"+t.forcedWidth+"px'":"",e=t.forcedHeight?"height='"+t.forcedHeight+"px'":"",n=t.text.split(/\r\n|\r|\n/g),t.renderer&&(n=t.renderer.lines),"<text x='"+t.x+"' y='"+t.y+"' "+i+" "+e+" fill='"+t.color+"' style='font: "+t.font+";'> "+n.map(function(e){return function(e,n){var i;return i=0===n?0:"1.2em","<tspan x='"+t.x+"' dy='"+i+"' alignment-baseline='text-before-edge'> "+e+" </tspan>"}}(this)).join("")+" </text>"}),e.exports={defineSVGRenderer:i,renderShapeToSVG:o}},{"./lineEndCapShapes.coffee":7}],14:[function(t,e,n){var i,r,o,s,a=[].slice;o=Array.prototype.slice,i=t("./canvasRenderer").renderShapeToContext,r=t("./svgRenderer").renderShapeToSVG,s={addImageOnload:function(t,e){var n;return n=t.onload,t.onload=function(){return"function"==typeof n&&n(),e()},t},last:function(t,e){return null==e&&(e=null),e?o.call(t,Math.max(t.length-e,0)):t[t.length-1]},classSet:function(t){var e,n;e=[];for(n in t)t[n]&&e.push(n);return e.join(" ")},matchElementSize:function(t,e,n,i){var r;return null==i&&(i=function(){}),r=function(r){return function(){var r,o,s;for(o=0,s=e.length;s>o;o++)r=e[o],r.style.width=""+t.offsetWidth+"px",r.style.height=""+t.offsetHeight+"px",null!=r.width&&(r.setAttribute("width",r.offsetWidth*n),r.setAttribute("height",r.offsetHeight*n));return i()}}(this),t.addEventListener("resize",r),window.addEventListener("resize",r),window.addEventListener("orientationchange",r),r()},combineCanvases:function(){var t,e,n,i,r,o,s,h;for(n=1<=arguments.length?a.call(arguments,0):[],t=document.createElement("canvas"),t.width=n[0].width,t.height=n[0].height,r=0,s=n.length;s>r;r++)e=n[r],t.width=Math.max(e.width,t.width),t.height=Math.max(e.height,t.height);for(i=t.getContext("2d"),o=0,h=n.length;h>o;o++)e=n[o],i.drawImage(e,0,0);return t},renderShapes:function(t,e,n,r){var o,s,a,h;for(null==n&&(n=1),null==r&&(r=null),r=r||document.createElement("canvas"),r.width=e.width*n,r.height=e.height*n,o=r.getContext("2d"),o.translate(-e.x*n,-e.y*n),o.scale(n,n),a=0,h=t.length;h>a;a++)s=t[a],i(o,s);return r},renderShapesToSVG:function(t,e,n){var i,o,s,a;return s=e.x,a=e.y,o=e.width,i=e.height,("<svg xmlns='http://www.w3.org/2000/svg' width='"+o+"' height='"+i+"' viewBox='0 0 "+o+" "+i+"'> <rect width='"+o+"' height='"+i+"' x='0' y='0' fill='"+n+"' /> <g transform='translate("+-s+", "+-a+")'> "+t.map(r).join("")+" </g> </svg>").replace(/(\r\n|\n|\r)/gm,"")},getBoundingRect:function(t,e,n){var i,r,o,s,a,h,c;if(!t.length)return{x:0,y:0,width:e,height:n};for(o=t[0].x,s=t[0].y,i=t[0].x+t[0].width,r=t[0].y+t[0].height,h=0,c=t.length;c>h;h++)a=t[h],o=Math.floor(Math.min(a.x,o)),s=Math.floor(Math.min(a.y,s)),i=Math.ceil(Math.max(i,a.x+a.width)),r=Math.ceil(Math.max(r,a.y+a.height));return o=e?0:o,s=n?0:s,i=e||i,r=n||r,{x:o,y:s,width:i-o,height:r-s}},getBackingScale:function(t){return null==window.devicePixelRatio?1:window.devicePixelRatio>1?window.devicePixelRatio:1},requestAnimationFrame:(window.requestAnimationFrame||window.setTimeout).bind(window),getGUID:function(){var t;return t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}(),requestAnimationFrame:function(t){return window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(t):window.requestAnimationFrame?window.requestAnimationFrame(t):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(t):setTimeout(t,0)},cancelAnimationFrame:function(t){return window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(t):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(t):window.cancelAnimationFrame?window.cancelAnimationFrame(t):window.mozCancelAnimationFrame?window.mozCancelAnimationFrame(t):clearTimeout(t)}},e.exports=s},{"./canvasRenderer":5,"./svgRenderer":13}],15:[function(t,e,n){!function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.CustomEvent.prototype,window.CustomEvent=t}()},{}],16:[function(t,e,n){var i=!1;CanvasRenderingContext2D.prototype.setLineDash||(CanvasRenderingContext2D.prototype.setLineDash=function(){i||(console.warn("context2D.setLineDash is a no-op in this browser."),i=!0)}),e.exports=null},{}],17:[function(t,e,n){var i,r,o,s,a,h,c,u,l,p,d,f,g,m,y,S;t("./ie_customevent"),t("./ie_setLineDash"),i=t("./core/LiterallyCanvas"),o=t("./core/canvasRenderer"),m=t("./core/svgRenderer"),g=t("./core/shapes"),S=t("./core/util"),p=t("./core/renderSnapshotToImage"),d=t("./core/renderSnapshotToSVG"),u=t("./core/localization").localize,s={snapshotToShapes:function(t){var e,n,i,r,o;for(r=t.shapes,o=[],n=0,i=r.length;i>n;n++)e=r[n],o.push(g.JSONToShape(e));return o},snapshotJSONToShapes:function(t){return s.snapshotToShapes(JSON.parse(t))}},r=t("./tools/base"),y={Pencil:t("./tools/Pencil"),Eraser:t("./tools/Eraser"),Line:t("./tools/Line"),Rectangle:t("./tools/Rectangle"),Ellipse:t("./tools/Ellipse"),Text:t("./tools/Text"),Polygon:t("./tools/Polygon"),Pan:t("./tools/Pan"),Eyedropper:t("./tools/Eyedropper"),SelectShape:t("./tools/SelectShape"),Tool:r.Tool,ToolWithStroke:r.ToolWithStroke},h=[y.Pencil,y.Eraser,y.Line,y.Rectangle,y.Ellipse,y.Text,y.Polygon,y.Pan,y.Eyedropper],a="lib/img",f=function(t){return a=t},c=function(t,e){var n,r,o,s,c,u,l,p;null==e&&(e={}),null==e.imageURLPrefix&&(e.imageURLPrefix=a),null==e.primaryColor&&(e.primaryColor="hsla(0, 0%, 0%, 1)"),null==e.secondaryColor&&(e.secondaryColor="hsla(0, 0%, 100%, 1)"),null==e.backgroundColor&&(e.backgroundColor="transparent"),null==e.strokeWidths&&(e.strokeWidths=[1,2,5,10,20,30]),null==e.defaultStrokeWidth&&(e.defaultStrokeWidth=5),null==e.toolbarPosition&&(e.toolbarPosition="top"),null==e.keyboardShortcuts&&(e.keyboardShortcuts=!0),null==e.imageSize&&(e.imageSize={width:"infinite",height:"infinite"}),null==e.backgroundShapes&&(e.backgroundShapes=[]),null==e.watermarkImage&&(e.watermarkImage=null),null==e.watermarkScale&&(e.watermarkScale=1),null==e.zoomMin&&(e.zoomMin=.2),null==e.zoomMax&&(e.zoomMax=4),null==e.zoomStep&&(e.zoomStep=.2),null==e.snapshot&&(e.snapshot=null),"tools"in e||(e.tools=h),p=t.children;for(u=0,l=p.length;l>u;u++)n=p[u],t.removeChild(n);return-1===[" "," "].join(t.className).indexOf(" literally ")&&(t.className=t.className+" literally"),c="toolbar-hidden",t.className=t.className+" "+c,r=document.createElement("div"),r.className="lc-drawing",t.appendChild(r),o=new i(r,e),"onInit"in e&&e.onInit(o),s=function(){return o._teardown(),r.remove()},o.teardown=s,o},l=function(t){return t.fn.literallycanvas=function(t){return null==t&&(t={}),this.each(function(e){return function(e,n){return n.literallycanvas=c(n,t)}}(this)),this}},window.LC={init:c},window.$&&l(window.$),e.exports={init:c,registerJQueryPlugin:l,util:S,tools:y,setDefaultImageURLPrefix:f,defaultTools:h,defineShape:g.defineShape,createShape:g.createShape,JSONToShape:g.JSONToShape,shapeToJSON:g.shapeToJSON,defineCanvasRenderer:o.defineCanvasRenderer,renderShapeToContext:o.renderShapeToContext,renderShapeToCanvas:o.renderShapeToCanvas,renderShapesToCanvas:S.renderShapes,defineSVGRenderer:m.defineSVGRenderer,renderShapeToSVG:m.renderShapeToSVG,renderShapesToSVG:S.renderShapesToSVG,snapshotToShapes:s.snapshotToShapes,snapshotJSONToShapes:s.snapshotJSONToShapes,renderSnapshotToImage:p,renderSnapshotToSVG:d,localize:u}},{"./core/LiterallyCanvas":1,"./core/canvasRenderer":5,"./core/localization":8,"./core/renderSnapshotToImage":10,"./core/renderSnapshotToSVG":11,"./core/shapes":12,"./core/svgRenderer":13,"./core/util":14,"./ie_customevent":15,"./ie_setLineDash":16,"./tools/Ellipse":18,"./tools/Eraser":19,"./tools/Eyedropper":20,"./tools/Line":21,"./tools/Pan":22,"./tools/Pencil":23,"./tools/Polygon":24,"./tools/Rectangle":25,"./tools/SelectShape":26,"./tools/Text":27,"./tools/base":28}],18:[function(t,e,n){var i,r,o,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=t("./base").ToolWithStroke,o=t("../core/shapes").createShape,e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.name="Ellipse",e.prototype.iconName="ellipse",e.prototype.begin=function(t,e,n){return this.currentShape=o("Ellipse",{x:t,y:e,strokeWidth:this.strokeWidth,strokeColor:n.getColor("primary"),fillColor:n.getColor("secondary")})},e.prototype["continue"]=function(t,e,n){return this.currentShape.width=t-this.currentShape.x,this.currentShape.height=e-this.currentShape.y,n.drawShapeInProgress(this.currentShape)},e.prototype.end=function(t,e,n){return n.saveShape(this.currentShape)},e}(r)},{"../core/shapes":12,"./base":28}],19:[function(t,e,n){var i,r,o,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=t("./Pencil"),o=t("../core/shapes").createShape,e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.name="Eraser",e.prototype.iconName="eraser",e.prototype.makePoint=function(t,e,n){return o("Point",{x:t,y:e,size:this.strokeWidth,color:"#000"})},e.prototype.makeShape=function(){return o("ErasedLinePath")},e}(r)},{"../core/shapes":12,"./Pencil":23}],20:[function(t,e,n){var i,r,o={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=t("./base").Tool,e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.name="Eyedropper",e.prototype.iconName="eyedropper",e.prototype.readColor=function(t,e,n){var i;return i=n.getPixel(t,e),n.setColor("primary",i||n.getColor("background"))},e.prototype.begin=function(t,e,n){return this.readColor(t,e,n)},e.prototype["continue"]=function(t,e,n){return this.readColor(t,e,n)},e}(r)},{"./base":28}],21:[function(t,e,n){var i,r,o,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=t("./base").ToolWithStroke,o=t("../core/shapes").createShape,e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.name="Line",e.prototype.iconName="line",e.prototype.optionsStyle="line-options-and-stroke-width",e.prototype.begin=function(t,e,n){return this.currentShape=o("Line",{x1:t,y1:e,x2:t,y2:e,strokeWidth:this.strokeWidth,dash:function(){switch(!1){case!this.isDashed:return[2*this.strokeWidth,4*this.strokeWidth];default:return null}}.call(this),endCapShapes:this.hasEndArrow?[null,"arrow"]:null,color:n.getColor("primary")})},e.prototype["continue"]=function(t,e,n){return this.currentShape.x2=t,this.currentShape.y2=e,n.drawShapeInProgress(this.currentShape)},e.prototype.end=function(t,e,n){return n.saveShape(this.currentShape)},e}(r)},{"../core/shapes":12,"./base":28}],22:[function(t,e,n){var i,r,o,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=t("./base").Tool,o=t("../core/shapes").createShape,e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.name="Pan",e.prototype.iconName="pan",e.prototype.usesSimpleAPI=!1,e.prototype.didBecomeActive=function(t){var e;return e=[],this.unsubscribe=function(t){return function(){var t,n,i,r;for(r=[],n=0,i=e.length;i>n;n++)t=e[n],r.push(t());return r}}(this),e.push(t.on("lc-pointerdown",function(e){return function(n){var i,r;return i=n.rawX,r=n.rawY,e.oldPosition=t.position,e.pointerStart={x:i,y:r}}}(this))),e.push(t.on("lc-pointerdrag",function(e){return function(n){var i,r,o;return r=n.rawX,o=n.rawY,i={x:(r-e.pointerStart.x)*t.backingScale,y:(o-e.pointerStart.y)*t.backingScale},t.setPan(e.oldPosition.x+i.x,e.oldPosition.y+i.y)}}(this)))},e.prototype.willBecomeInactive=function(t){return this.unsubscribe()},e}(r)},{"../core/shapes":12,"./base":28}],23:[function(t,e,n){var i,r,o,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=t("./base").ToolWithStroke,o=t("../core/shapes").createShape,e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.name="Pencil",e.prototype.iconName="pencil",e.prototype.eventTimeThreshold=10,e.prototype.begin=function(t,e,n){return this.color=n.getColor("primary"),this.currentShape=this.makeShape(),this.currentShape.addPoint(this.makePoint(t,e,n)),this.lastEventTime=Date.now()},e.prototype["continue"]=function(t,e,n){var i;return i=Date.now()-this.lastEventTime,i>this.eventTimeThreshold?(this.lastEventTime+=i,this.currentShape.addPoint(this.makePoint(t,e,n)),n.drawShapeInProgress(this.currentShape)):void 0},e.prototype.end=function(t,e,n){return n.saveShape(this.currentShape),this.currentShape=void 0},e.prototype.makePoint=function(t,e,n){return o("Point",{x:t,y:e,size:this.strokeWidth,color:this.color})},e.prototype.makeShape=function(){return o("LinePath")},e}(r)},{"../core/shapes":12,"./base":28}],24:[function(t,e,n){var i,r,o,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=t("./base").ToolWithStroke,o=t("../core/shapes").createShape,e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.name="Polygon",e.prototype.iconName="polygon",e.prototype.usesSimpleAPI=!1,e.prototype.didBecomeActive=function(t){var n,i,r,o,s,a,h;return e.__super__.didBecomeActive.call(this,t),h=[],this.polygonUnsubscribe=function(t){return function(){var t,e,n,i;for(i=[],e=0,n=h.length;n>e;e++)t=h[e],i.push(t());return i}}(this),this.points=null,this.maybePoint=null,r=function(e){return function(){return e._getWillFinish()?e._close(t):(t.trigger("lc-polygon-started"),e.points?e.points.push(e.maybePoint):e.points=[e.maybePoint],e.maybePoint={x:e.maybePoint.x,y:e.maybePoint.y},t.setShapesInProgress(e._getShapes(t)),t.repaintLayer("main"))}}(this),i=function(e){return function(n){var i,r;return i=n.x,r=n.y,e.maybePoint?(e.maybePoint.x=i,e.maybePoint.y=r,t.setShapesInProgress(e._getShapes(t)),t.repaintLayer("main")):void 0}}(this),n=function(e){return function(n){var i,r;return i=n.x,r=n.y,e.maybePoint={x:i,y:r},t.setShapesInProgress(e._getShapes(t)),t.repaintLayer("main")}}(this),a=function(e){return function(){return e.maybePoint={x:1/0,y:1/0},e._close(t)}}(this),s=function(e){return function(){return e.maybePoint=e.points[0],e._close(t)}}(this),o=function(e){return function(){return e._cancel(t)}}(this),h.push(t.on("drawingChange",function(e){return function(){return e._cancel(t)}}(this))),h.push(t.on("lc-pointerdown",n)),h.push(t.on("lc-pointerdrag",i)),
h.push(t.on("lc-pointermove",i)),h.push(t.on("lc-pointerup",r)),h.push(t.on("lc-polygon-finishopen",a)),h.push(t.on("lc-polygon-finishclosed",s)),h.push(t.on("lc-polygon-cancel",o))},e.prototype.willBecomeInactive=function(t){return e.__super__.willBecomeInactive.call(this,t),(this.points||this.maybePoint)&&this._cancel(t),this.polygonUnsubscribe()},e.prototype._getArePointsClose=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)<10},e.prototype._getWillClose=function(){return this.points&&this.points.length>1&&this.maybePoint?this._getArePointsClose(this.points[0],this.maybePoint):!1},e.prototype._getWillFinish=function(){return this.points&&this.points.length>1&&this.maybePoint?this._getArePointsClose(this.points[0],this.maybePoint)||this._getArePointsClose(this.points[this.points.length-1],this.maybePoint):!1},e.prototype._cancel=function(t){return t.trigger("lc-polygon-stopped"),this.maybePoint=null,this.points=null,t.setShapesInProgress([]),t.repaintLayer("main")},e.prototype._close=function(t){return t.trigger("lc-polygon-stopped"),t.setShapesInProgress([]),this.points.length>2&&t.saveShape(this._getShape(t,!1)),this.maybePoint=null,this.points=null},e.prototype._getShapes=function(t,e){var n;return null==e&&(e=!0),n=this._getShape(t,e),n?[n]:[]},e.prototype._getShape=function(t,e){var n;return null==e&&(e=!0),n=[],this.points&&(n=n.concat(this.points)),!e&&n.length<3?null:(e&&this.maybePoint&&n.push(this.maybePoint),n.length>1?o("Polygon",{isClosed:this._getWillClose(),strokeColor:t.getColor("primary"),fillColor:t.getColor("secondary"),strokeWidth:this.strokeWidth,points:n.map(function(t){return o("Point",t)})}):null)},e.prototype.optionsStyle="polygon-and-stroke-width",e}(r)},{"../core/shapes":12,"./base":28}],25:[function(t,e,n){var i,r,o,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=t("./base").ToolWithStroke,o=t("../core/shapes").createShape,e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.name="Rectangle",e.prototype.iconName="rectangle",e.prototype.begin=function(t,e,n){return this.currentShape=o("Rectangle",{x:t,y:e,strokeWidth:this.strokeWidth,strokeColor:n.getColor("primary"),fillColor:n.getColor("secondary")})},e.prototype["continue"]=function(t,e,n){return this.currentShape.width=t-this.currentShape.x,this.currentShape.height=e-this.currentShape.y,n.drawShapeInProgress(this.currentShape)},e.prototype.end=function(t,e,n){return n.saveShape(this.currentShape)},e}(r)},{"../core/shapes":12,"./base":28}],26:[function(t,e,n){var i,r,o,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=t("./base").Tool,o=t("../core/shapes").createShape,e.exports=i=function(t){function e(t){this.selectCanvas=document.createElement("canvas"),this.selectCanvas.style["background-color"]="transparent",this.selectCtx=this.selectCanvas.getContext("2d")}return a(e,t),e.prototype.name="SelectShape",e.prototype.usesSimpleAPI=!1,e.prototype.didBecomeActive=function(t){var e,n,i,r,s;return s=[],this._selectShapeUnsubscribe=function(t){return function(){var t,e,n,i;for(i=[],e=0,n=s.length;n>e;e++)t=s[e],i.push(t());return i}}(this),e=function(e){return function(n){var i,r,s,a;return s=n.x,a=n.y,e.didDrag=!1,r=e._getPixel(s,a,t,e.selectCtx),e.selectedShape=t.shapes[r],null!=e.selectedShape?(t.trigger("shapeSelected",{selectedShape:e.selectedShape}),t.setShapesInProgress([e.selectedShape,o("SelectionBox",{shape:e.selectedShape,handleSize:0})]),t.repaintLayer("main"),i=e.selectedShape.getBoundingRect(),e.dragOffset={x:s-i.x,y:a-i.y}):void 0}}(this),n=function(e){return function(n){var i,r;return i=n.x,r=n.y,null!=e.selectedShape?(e.didDrag=!0,e.selectedShape.setUpperLeft({x:i-e.dragOffset.x,y:r-e.dragOffset.y}),t.setShapesInProgress([e.selectedShape,o("SelectionBox",{shape:e.selectedShape,handleSize:0})]),t.repaintLayer("main")):void 0}}(this),r=function(e){return function(n){var i,r;return i=n.x,r=n.y,e.didDrag?(e.didDrag=!1,t.trigger("shapeMoved",{shape:e.selectedShape}),t.trigger("drawingChange",{}),t.repaintLayer("main")):void 0}}(this),i=function(e){return function(){return e._drawSelectCanvas(t)}}(this),s.push(t.on("lc-pointerdown",e)),s.push(t.on("lc-pointerdrag",n)),s.push(t.on("lc-pointerup",r)),s.push(t.on("drawingChange",i)),this._drawSelectCanvas(t)},e.prototype.willBecomeInactive=function(t){return this._selectShapeUnsubscribe(),t.setShapesInProgress([])},e.prototype._drawSelectCanvas=function(t){var e;return this.selectCanvas.width=t.canvas.width,this.selectCanvas.height=t.canvas.height,this.selectCtx.clearRect(0,0,this.selectCanvas.width,this.selectCanvas.height),e=t.shapes.map(function(t){return function(e,n){return o("SelectionBox",{shape:e,handleSize:0,backgroundColor:"#"+t._intToHex(n)})}}(this)),t.draw(e,this.selectCtx)},e.prototype._intToHex=function(t){return("000000"+t.toString(16)).slice(-6)},e.prototype._getPixel=function(t,e,n,i){var r,o;return r=n.drawingCoordsToClientCoords(t,e),o=i.getImageData(r.x,r.y,1,1).data,o[3]?parseInt(this._rgbToHex(o[0],o[1],o[2]),16):null},e.prototype._componentToHex=function(t){var e;return e=t.toString(16),("0"+e).slice(-2)},e.prototype._rgbToHex=function(t,e,n){return""+this._componentToHex(t)+this._componentToHex(e)+this._componentToHex(n)},e}(r)},{"../core/shapes":12,"./base":28}],27:[function(t,e,n){var i,r,o,s,a={}.hasOwnProperty,h=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=t("./base").Tool,o=t("../core/shapes").createShape,s=function(t,e){return t.x<e.x?!1:t.y<e.y?!1:t.x>e.x+e.width?!1:t.y>e.y+e.height?!1:!0},e.exports=i=function(t){function e(){this.text="",this.font="bold 18px sans-serif",this.currentShape=null,this.currentShapeState=null,this.initialShapeBoundingRect=null,this.dragAction=null,this.didDrag=!1}return h(e,t),e.prototype.name="Text",e.prototype.iconName="text",e.prototype.didBecomeActive=function(t){var e,n,i;return n=[],this.unsubscribe=function(t){return function(){var t,e,i,r;for(r=[],e=0,i=n.length;i>e;e++)t=n[e],r.push(t());return r}}(this),e=function(e){return function(){return e._ensureNotEditing(t),e._clearCurrentShape(t),t.repaintLayer("main")}}(this),i=function(e){return function(){return e._updateInputEl(t)}}(this),n.push(t.on("drawingChange",e)),n.push(t.on("zoom",i)),n.push(t.on("imageSizeChange",i)),n.push(t.on("snapshotLoad",function(e){return function(){return e._clearCurrentShape(t),t.repaintLayer("main")}}(this))),n.push(t.on("primaryColorChange",function(e){return function(n){return e.currentShape?(e.currentShape.color=n,e._updateInputEl(t),t.repaintLayer("main")):void 0}}(this))),n.push(t.on("setFont",function(e){return function(n){return e.currentShape?(e.font=n,e.currentShape.setFont(n),e._setShapesInProgress(t),e._updateInputEl(t),t.repaintLayer("main")):void 0}}(this)))},e.prototype.willBecomeInactive=function(t){return this.currentShape&&(this._ensureNotEditing(t),this.commit(t)),this.unsubscribe()},e.prototype.setText=function(t){return this.text=t},e.prototype._ensureNotEditing=function(t){return"editing"===this.currentShapeState?this._exitEditingState(t):void 0},e.prototype._clearCurrentShape=function(t){return this.currentShape=null,this.initialShapeBoundingRect=null,this.currentShapeState=null,t.setShapesInProgress([])},e.prototype.commit=function(t){return this.currentShape.text&&t.saveShape(this.currentShape),this._clearCurrentShape(t),t.repaintLayer("main")},e.prototype._getSelectionShape=function(t,e){return null==e&&(e=null),o("SelectionBox",{shape:this.currentShape,ctx:t,backgroundColor:e})},e.prototype._setShapesInProgress=function(t){switch(this.currentShapeState){case"selected":return t.setShapesInProgress([this._getSelectionShape(t.ctx),this.currentShape]);case"editing":return t.setShapesInProgress([this._getSelectionShape(t.ctx,"#fff")]);default:return t.setShapesInProgress([this.currentShape])}},e.prototype.begin=function(t,e,n){var i,r,a,h;return this.dragAction="none",this.didDrag=!1,"selected"===this.currentShapeState||"editing"===this.currentShapeState?(i=this.currentShape.getBoundingRect(n.ctx),h=this._getSelectionShape(n.ctx),a=h.getBoundingRect(),r={x:t,y:e},s(r,i)&&(this.dragAction="move"),s(r,h.getBottomRightHandleRect())&&(this.dragAction="resizeBottomRight"),s(r,h.getTopLeftHandleRect())&&(this.dragAction="resizeTopLeft"),s(r,h.getBottomLeftHandleRect())&&(this.dragAction="resizeBottomLeft"),s(r,h.getTopRightHandleRect())&&(this.dragAction="resizeTopRight"),"none"===this.dragAction&&"editing"===this.currentShapeState&&(this.dragAction="stop-editing",this._exitEditingState(n))):(this.color=n.getColor("primary"),this.currentShape=o("Text",{x:t,y:e,text:this.text,color:this.color,font:this.font,v:1}),this.dragAction="place",this.currentShapeState="selected"),"none"===this.dragAction?void this.commit(n):(this.initialShapeBoundingRect=this.currentShape.getBoundingRect(n.ctx),this.dragOffset={x:t-this.initialShapeBoundingRect.x,y:e-this.initialShapeBoundingRect.y},this._setShapesInProgress(n),n.repaintLayer("main"))},e.prototype["continue"]=function(t,e,n){var i,r,o;if("none"!==this.dragAction){switch(i=this.initialShapeBoundingRect,o=i.x+i.width,r=i.y+i.height,this.dragAction){case"place":this.currentShape.x=t,this.currentShape.y=e,this.didDrag=!0;break;case"move":this.currentShape.x=t-this.dragOffset.x,this.currentShape.y=e-this.dragOffset.y,this.didDrag=!0;break;case"resizeBottomRight":this.currentShape.setSize(t-(this.dragOffset.x-this.initialShapeBoundingRect.width)-i.x,e-(this.dragOffset.y-this.initialShapeBoundingRect.height)-i.y);break;case"resizeTopLeft":this.currentShape.setSize(o-t+this.dragOffset.x,r-e+this.dragOffset.y),this.currentShape.setPosition(t-this.dragOffset.x,e-this.dragOffset.y);break;case"resizeBottomLeft":this.currentShape.setSize(o-t+this.dragOffset.x,e-(this.dragOffset.y-this.initialShapeBoundingRect.height)-i.y),this.currentShape.setPosition(t-this.dragOffset.x,this.currentShape.y);break;case"resizeTopRight":this.currentShape.setSize(t-(this.dragOffset.x-this.initialShapeBoundingRect.width)-i.x,r-e+this.dragOffset.y),this.currentShape.setPosition(this.currentShape.x,e-this.dragOffset.y)}return this._setShapesInProgress(n),n.repaintLayer("main"),this._updateInputEl(n)}},e.prototype.end=function(t,e,n){return this.currentShape?(this.currentShape.setSize(this.currentShape.forcedWidth,0),"selected"===this.currentShapeState&&("place"===this.dragAction||"move"===this.dragAction&&!this.didDrag)&&this._enterEditingState(n),this._setShapesInProgress(n),n.repaintLayer("main"),this._updateInputEl(n)):void 0},e.prototype._enterEditingState=function(t){var e;if(this.currentShapeState="editing",this.inputEl)throw"State error";return this.inputEl=document.createElement("textarea"),this.inputEl.className="text-tool-input",this.inputEl.style.position="absolute",this.inputEl.style.transformOrigin="0px 0px",this.inputEl.style.backgroundColor="transparent",this.inputEl.style.border="none",this.inputEl.style.outline="none",this.inputEl.style.margin="0",this.inputEl.style.padding="4px",this.inputEl.style.zIndex="1000",this.inputEl.style.overflow="hidden",this.inputEl.style.resize="none",this.inputEl.value=this.currentShape.text,this.inputEl.addEventListener("mousedown",function(t){return t.stopPropagation()}),this.inputEl.addEventListener("touchstart",function(t){return t.stopPropagation()}),e=function(e){return function(n){return e.currentShape.setText(n.target.value),e.currentShape.enforceMaxBoundingRect(t),e._setShapesInProgress(t),t.repaintLayer("main"),e._updateInputEl(t),n.stopPropagation()}}(this),this.inputEl.addEventListener("keydown",function(e){return function(){return e._updateInputEl(t,!0)}}(this)),this.inputEl.addEventListener("keyup",e),this.inputEl.addEventListener("change",e),this._updateInputEl(t),t.containerEl.appendChild(this.inputEl),this.inputEl.focus(),this._setShapesInProgress(t)},e.prototype._exitEditingState=function(t){return this.currentShapeState="selected",t.containerEl.removeChild(this.inputEl),this.inputEl=null,this._setShapesInProgress(t),t.repaintLayer("main")},e.prototype._updateInputEl=function(t,e){var n,i;return null==e&&(e=!1),this.inputEl?(n=this.currentShape.getBoundingRect(t.ctx,!0),this.inputEl.style.font=this.currentShape.font,this.inputEl.style.color=this.currentShape.color,this.inputEl.style.left=""+(t.position.x/t.backingScale+n.x*t.scale-4)+"px",this.inputEl.style.top=""+(t.position.y/t.backingScale+n.y*t.scale-4)+"px",e&&!this.currentShape.forcedWidth?this.inputEl.style.width=""+(n.width+10+this.currentShape.renderer.emDashWidth)+"px":this.inputEl.style.width=""+(n.width+12)+"px",e?this.inputEl.style.height=""+(n.height+10+this.currentShape.renderer.metrics.leading)+"px":this.inputEl.style.height=""+(n.height+10)+"px",i="scale("+t.scale+")",this.inputEl.style.transform=i,this.inputEl.style.webkitTransform=i,this.inputEl.style.MozTransform=i,this.inputEl.style.msTransform=i,this.inputEl.style.OTransform=i):void 0},e.prototype.optionsStyle="font",e}(r)},{"../core/shapes":12,"./base":28}],28:[function(t,e,n){var i,r,o,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o={},o.Tool=i=function(){function t(){}return t.prototype.name=null,t.prototype.iconName=null,t.prototype.usesSimpleAPI=!0,t.prototype.begin=function(t,e,n){},t.prototype["continue"]=function(t,e,n){},t.prototype.end=function(t,e,n){},t.prototype.optionsStyle=null,t.prototype.didBecomeActive=function(t){},t.prototype.willBecomeInactive=function(t){},t}(),o.ToolWithStroke=r=function(t){function e(t){this.strokeWidth=t.opts.defaultStrokeWidth}return a(e,t),e.prototype.optionsStyle="stroke-width",e.prototype.didBecomeActive=function(t){var e;return e=[],this.unsubscribe=function(t){return function(){var t,n,i,r;for(r=[],n=0,i=e.length;i>n;n++)t=e[n],r.push(t());return r}}(this),e.push(t.on("setStrokeWidth",function(t){return function(e){return t.strokeWidth=e}}(this)))},e.prototype.willBecomeInactive=function(t){return this.unsubscribe()},e}(i),e.exports=o},{}]},{},[17])(17)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[8]);
